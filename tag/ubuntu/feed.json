{
    "version": "https://jsonfeed.org/version/1",
    "title": "命运转轮 • All posts by \"ubuntu\" tag",
    "description": "不曾亏欠, 不曾辜负, 如此足矣",
    "home_page_url": "https://arachnid.cc",
    "items": [
        {
            "id": "https://arachnid.cc/ubuntu-tftp-nfs-create/",
            "url": "https://arachnid.cc/ubuntu-tftp-nfs-create/",
            "title": "Ubuntu 搭建 tftp 及 NFS 服务",
            "date_published": "2022-12-13T14:56:07.000Z",
            "content_html": "<blockquote>\n<p>平台：Ubuntu 18.04.6</p>\n</blockquote>\n<h1 id=\"tftp-服务端搭建\"><a class=\"anchor\" href=\"#tftp-服务端搭建\">#</a> tftp 服务端搭建</h1>\n<h2 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> 安装</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> tftpd-hpa</pre></td></tr></table></figure><h2 id=\"配置\"><a class=\"anchor\" href=\"#配置\">#</a> 配置</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> /home/user/tftp_share</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> <span class=\"token parameter variable\">-R</span> <span class=\"token number\">777</span> /home/user/tftp_share</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[user@localhost] #\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/default/tftpd-hpa</pre></td></tr></table></figure><p>更改  <code>TFTP_DIRECTORY</code>  字段，填写配置 tftp 服务共享的路径，eg：</p>\n<figure class=\"highlight text\"><figcaption data-lang=\"text\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>TFTP_USERNAME=\"tftp\"</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>TFTP_DIRECTORY=\"/home/user/tftp_share\"</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>TFTP_ADDRESS=\":69\"</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>TFTP_OPTIONS=\"-l -c -s\"</pre></td></tr></table></figure><h2 id=\"启动服务\"><a class=\"anchor\" href=\"#启动服务\">#</a> 启动服务</h2>\n<p>在加载完后，重启服务器：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> systemctl restart tftpd-hpa</pre></td></tr></table></figure><p>查看服务启动状态：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> systemctl status tftpd-hpa</pre></td></tr></table></figure><h2 id=\"测试传输\"><a class=\"anchor\" href=\"#测试传输\">#</a> 测试传输</h2>\n<p>如果本机没有安装 tftp 客户端，可以使用以下命令安装：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> tftp-hpa</pre></td></tr></table></figure><p>然后连接 tftp 服务器，通过 get 和 put 读写文件：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre>tftp <span class=\"token number\">127.0</span>.0.1 <span class=\"token comment\">#连接服务器</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command></td><td><pre><span class=\"token operator\">></span> get a.txt <span class=\"token comment\"># 获取 a.txt</span></pre></td></tr><tr><td data-num=\"3\"></td><td data-command></td><td><pre><span class=\"token operator\">></span> put b.txt <span class=\"token comment\"># 上传 b.txt</span></pre></td></tr><tr><td data-num=\"4\"></td><td data-command></td><td><pre><span class=\"token operator\">></span> q <span class=\"token comment\"># 断开连接</span></pre></td></tr></table></figure><h1 id=\"nfs-服务端搭建\"><a class=\"anchor\" href=\"#nfs-服务端搭建\">#</a> NFS 服务端搭建</h1>\n<h2 id=\"安装-2\"><a class=\"anchor\" href=\"#安装-2\">#</a> 安装</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> nfs-kernel-server</pre></td></tr></table></figure><h2 id=\"配置-2\"><a class=\"anchor\" href=\"#配置-2\">#</a> 配置</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> /home/user/nfs_share</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> <span class=\"token parameter variable\">-R</span> <span class=\"token number\">777</span> /home/user/nfs_share</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"[user@localhost] #\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/exports</pre></td></tr></table></figure><p>在最后一行添加自己的共享路径，如：</p>\n<figure class=\"highlight text\"><figcaption data-lang=\"text\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>/home/user/nfs_share *(rw,sync,no_root_squash,no_subtree_check)</pre></td></tr></table></figure><p><strong>note：</strong></p>\n<p><code>/home/nfs_share</code>  是 NFS 服务端的共享路径。</p>\n<p><code>*</code>  表示所有网段都可以访问（可以指定具体的 ip ）。</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>ro</code></td>\n<td>只读访问</td>\n</tr>\n<tr>\n<td><code>rw</code></td>\n<td>读写访问</td>\n</tr>\n<tr>\n<td><code>sync</code></td>\n<td>所有数据在请求时写入共享</td>\n</tr>\n<tr>\n<td><code>async</code></td>\n<td>nfs 在写入数据前可以响应请求</td>\n</tr>\n<tr>\n<td><code>secure</code></td>\n<td>nfs 通过 1024 以下的安全 TCP/IP 端口发送</td>\n</tr>\n<tr>\n<td><code>insecure</code></td>\n<td>nfs 通过 1024 以上的端口发送</td>\n</tr>\n<tr>\n<td><code>wdelay</code></td>\n<td>如果多个用户要写入 nfs 目录，则归组写入（默认）</td>\n</tr>\n<tr>\n<td><code>no_wdelay</code></td>\n<td>如果多个用户要写入 nfs 目录，则立即写入，当使用 async 时，无需此设置</td>\n</tr>\n<tr>\n<td><code>hide</code></td>\n<td>在 nfs 共享目录中不共享其子目录</td>\n</tr>\n<tr>\n<td><code>no_hide</code></td>\n<td>共享 nfs 目录的子目录</td>\n</tr>\n<tr>\n<td><code>subtree_check</code></td>\n<td>如果共享 /usr/bin 之类的子目录时，强制 nfs 检查父目录的权限（默认）</td>\n</tr>\n<tr>\n<td><code>no_subtree_check</code></td>\n<td>不检查父目录权限</td>\n</tr>\n<tr>\n<td><code>all_squash</code></td>\n<td>共享文件的 UID 和 GID 映射匿名用户 anonymous，适合公用目录</td>\n</tr>\n<tr>\n<td><code>no_all_squash</code></td>\n<td>保留共享文件的 UID 和 GID（默认）</td>\n</tr>\n<tr>\n<td><code>root_squash</code></td>\n<td>root 用户的所有请求映射成如 anonymous 用户一样的权限（默认）</td>\n</tr>\n<tr>\n<td><code>no_root_squash</code></td>\n<td>root 用户具有根目录的完全管理访问权限</td>\n</tr>\n<tr>\n<td><code>anonuid=xxx</code></td>\n<td>指定 nfs 服务器 /etc/passwd 文件中匿名用户的 UID</td>\n</tr>\n<tr>\n<td><code>anongid=xxx</code></td>\n<td>指定 nfs 服务器 /etc/passwd 文件中匿名用户的 GID</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"启动服务-2\"><a class=\"anchor\" href=\"#启动服务-2\">#</a> 启动服务</h2>\n<p>在加载完后，重启服务器：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> systemctl restart nfs-kernel-server</pre></td></tr></table></figure><p>查看服务启动状态：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> systemctl status nfs-kernel-server</pre></td></tr></table></figure><h2 id=\"测试挂载\"><a class=\"anchor\" href=\"#测试挂载\">#</a> 测试挂载</h2>\n<p>如果本机没有安装 NFS 客户端，可以使用以下命令安装：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> nfs-common</pre></td></tr></table></figure><p>然后执行本地挂载测试：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">mount</span> <span class=\"token parameter variable\">-t</span> nfs <span class=\"token parameter variable\">-o</span> nolock localhost:/home/user/nfs_share /mnt</pre></td></tr></table></figure><h2 id=\"添加对-version-2-的支持\"><a class=\"anchor\" href=\"#添加对-version-2-的支持\">#</a> 添加对 version 2 的支持</h2>\n<p>使用如下命令查看对 NFS 版本的支持：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">cat</span> /proc/fs/nfsd/versions</pre></td></tr><tr><td data-num=\"2\"></td><td data-command></td><td><pre><span class=\"token parameter variable\">-2</span> +3 +4 +4.1 +4.2</pre></td></tr></table></figure><p>可以看出来  <code>-2</code>  说明目前是对 NFS 的 version 2 并不支持的，因此需要稍作修改才可完成兼容工作：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/default/nfs-kernel-server</pre></td></tr></table></figure><p>通过修改  <code>RPCNFSDCOUNT</code>  、 <code>RPCMOUNTDOPTS</code>  、 <code>RPCSVCGSSDOPTS</code>  的字段得到：</p>\n<figure class=\"highlight text\"><figcaption data-lang=\"text\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre># Number of servers to start up</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>RPCNFSDCOUNT=\"-V 2 8\"</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre># Runtime priority of server (see nice(1))</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>RPCNFSDPRIORITY=0</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre># Options for rpc.mountd.</pre></td></tr><tr><td data-num=\"8\"></td><td><pre># If you have a port-based firewall, you might want to set up</pre></td></tr><tr><td data-num=\"9\"></td><td><pre># a fixed port here using the --port option. For more information, </pre></td></tr><tr><td data-num=\"10\"></td><td><pre># see rpc.mountd(8) or http://wiki.debian.org/SecuringNFS</pre></td></tr><tr><td data-num=\"11\"></td><td><pre># To disable NFSv4 on the server, specify '--no-nfs-version 4' here</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>RPCMOUNTDOPTS=\"-V 2 --manage-gids\"</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre># Do you want to start the svcgssd daemon? It is only required for Kerberos</pre></td></tr><tr><td data-num=\"15\"></td><td><pre># exports. Valid alternatives are \"yes\" and \"no\"; the default is \"no\".</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>NEED_SVCGSSD=\"\"</pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre># Options for rpc.svcgssd.</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>RPCSVCGSSDOPTS=\"--nfs-version 2,3,4 --debug --syslog\"</pre></td></tr></table></figure><p>然后重启一下服务，再次查看版本支持：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> systemctl restart nfs-kernel-server</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">cat</span> /proc/fs/nfsd/versions</pre></td></tr><tr><td data-num=\"3\"></td><td data-command></td><td><pre>+2 +3 +4 +4.1 +4.2</pre></td></tr></table></figure>",
            "tags": [
                "history",
                "Linux",
                "Ubuntu"
            ]
        },
        {
            "id": "https://arachnid.cc/ubuntu-ftp-create/",
            "url": "https://arachnid.cc/ubuntu-ftp-create/",
            "title": "Ubuntu 下 FTP 的搭建配置",
            "date_published": "2022-11-03T13:13:57.653Z",
            "content_html": "<blockquote>\n<p>平台：Ubuntu 18.04.6</p>\n<p>vsftpd 官网：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zZWN1cml0eS5hcHBzcG90LmNvbS92c2Z0cGQuaHRtbA==\">https://security.appspot.com/vsftpd.html</span></p>\n</blockquote>\n<h1 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> 安装</h1>\n<p>安装 FTP 服务，命令行输入：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update</pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> vsftpd</pre></td></tr></table></figure><h1 id=\"配置\"><a class=\"anchor\" href=\"#配置\">#</a> 配置</h1>\n<p>先备份配置文件：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /etc/vsftpd.conf /etc/vsftpd.conf.back</pre></td></tr></table></figure><p>vim 进入编辑信息：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/vsftpd.conf</pre></td></tr></table></figure><p>然后增加或修改以下信息：</p>\n<figure class=\"highlight text\"><figcaption data-lang=\"text\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre># Example config file /etc/vsftpd.conf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>#</pre></td></tr><tr><td data-num=\"3\"></td><td><pre># The default compiled in settings are fairly paranoid. This sample file</pre></td></tr><tr><td data-num=\"4\"></td><td><pre># loosens things up a bit, to make the ftp daemon more usable.</pre></td></tr><tr><td data-num=\"5\"></td><td><pre># Please see vsftpd.conf.5 for all compiled in defaults.</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>#</pre></td></tr><tr><td data-num=\"7\"></td><td><pre># READ THIS: This example file is NOT an exhaustive list of vsftpd options.</pre></td></tr><tr><td data-num=\"8\"></td><td><pre># Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd's</pre></td></tr><tr><td data-num=\"9\"></td><td><pre># capabilities.</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>#</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>#</pre></td></tr><tr><td data-num=\"12\"></td><td><pre># Run standalone?  vsftpd can run either from an inetd or as a standalone</pre></td></tr><tr><td data-num=\"13\"></td><td><pre># daemon started from an initscript.</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>listen=NO #是否开启侦听状态</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre># This directive enables listening on IPv6 sockets. By default, listening</pre></td></tr><tr><td data-num=\"17\"></td><td><pre># on the IPv6 \"any\" address (::) will accept connections from both IPv6</pre></td></tr><tr><td data-num=\"18\"></td><td><pre># and IPv4 clients. It is not necessary to listen on *both* IPv4 and IPv6</pre></td></tr><tr><td data-num=\"19\"></td><td><pre># sockets. If you want that (perhaps because you want to listen on specific</pre></td></tr><tr><td data-num=\"20\"></td><td><pre># addresses) then you must run two copies of vsftpd with two configuration</pre></td></tr><tr><td data-num=\"21\"></td><td><pre># files.</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>listen_ipv6=YES #如果能使用 ipv6的可以打开使用；只能用 ipv4的必须注释掉，不然重启不了</pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre># Allow anonymous FTP? (Disabled by default).</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>anonymous_enable=YES #允许匿名用户登录</pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre># Uncomment this to allow local users to log in.</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>local_enable=YES #允许实名登录</pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre># Uncomment this to enable any form of FTP write command.</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>write_enable=YES #允许实名用户进行写操作</pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre># Default umask for local users is 077. You may wish to change this to 022,</pre></td></tr><tr><td data-num=\"34\"></td><td><pre># if your users expect that (022 is used by most other ftpd's)</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>#local_umask=022</pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre># Uncomment this to allow the anonymous FTP user to upload files. This only</pre></td></tr><tr><td data-num=\"38\"></td><td><pre># has an effect if the above global write enable is activated. Also, you will</pre></td></tr><tr><td data-num=\"39\"></td><td><pre># obviously need to create a directory writable by the FTP user.</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>anon_upload_enable=YES #允许匿名用户上传文件</pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre># Uncomment this if you want the anonymous FTP user to be able to create</pre></td></tr><tr><td data-num=\"43\"></td><td><pre># new directories.</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>anon_mkdir_write_enable=YES #允许匿名用户创建目录</pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre># Activate directory messages - messages given to remote users when they</pre></td></tr><tr><td data-num=\"47\"></td><td><pre># go into a certain directory.</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>dirmessage_enable=YES</pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre># If enabled, vsftpd will display directory listings with the time</pre></td></tr><tr><td data-num=\"51\"></td><td><pre># in  your  local  time  zone.  The default is to display GMT. The</pre></td></tr><tr><td data-num=\"52\"></td><td><pre># times returned by the MDTM FTP command are also affected by this</pre></td></tr><tr><td data-num=\"53\"></td><td><pre># option.</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>use_localtime=YES</pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre># Activate logging of uploads/downloads.</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>xferlog_enable=YES</pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre># Make sure PORT transfer connections originate from port 20 (ftp-data).</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>connect_from_port_20=YES</pre></td></tr><tr><td data-num=\"61\"></td><td><pre></pre></td></tr><tr><td data-num=\"62\"></td><td><pre># If you want, you can arrange for uploaded anonymous files to be owned by</pre></td></tr><tr><td data-num=\"63\"></td><td><pre># a different user. Note! Using \"root\" for uploaded files is not</pre></td></tr><tr><td data-num=\"64\"></td><td><pre># recommended!</pre></td></tr><tr><td data-num=\"65\"></td><td><pre>#chown_uploads=YES</pre></td></tr><tr><td data-num=\"66\"></td><td><pre>#chown_username=whoever</pre></td></tr><tr><td data-num=\"67\"></td><td><pre></pre></td></tr><tr><td data-num=\"68\"></td><td><pre># You may override where the log file goes if you like. The default is shown</pre></td></tr><tr><td data-num=\"69\"></td><td><pre># below.</pre></td></tr><tr><td data-num=\"70\"></td><td><pre>#xferlog_file=/var/log/vsftpd.log</pre></td></tr><tr><td data-num=\"71\"></td><td><pre></pre></td></tr><tr><td data-num=\"72\"></td><td><pre># If you want, you can have your log file in standard ftpd xferlog format.</pre></td></tr><tr><td data-num=\"73\"></td><td><pre># Note that the default log file location is /var/log/xferlog in this case.</pre></td></tr><tr><td data-num=\"74\"></td><td><pre>#xferlog_std_format=YES</pre></td></tr><tr><td data-num=\"75\"></td><td><pre></pre></td></tr><tr><td data-num=\"76\"></td><td><pre># You may change the default value for timing out an idle session.</pre></td></tr><tr><td data-num=\"77\"></td><td><pre>#idle_session_timeout=600</pre></td></tr><tr><td data-num=\"78\"></td><td><pre></pre></td></tr><tr><td data-num=\"79\"></td><td><pre># You may change the default value for timing out a data connection.</pre></td></tr><tr><td data-num=\"80\"></td><td><pre>#data_connection_timeout=120</pre></td></tr><tr><td data-num=\"81\"></td><td><pre></pre></td></tr><tr><td data-num=\"82\"></td><td><pre># It is recommended that you define on your system a unique user which the</pre></td></tr><tr><td data-num=\"83\"></td><td><pre># ftp server can use as a totally isolated and unprivileged user.</pre></td></tr><tr><td data-num=\"84\"></td><td><pre>#nopriv_user=ftpsecure</pre></td></tr><tr><td data-num=\"85\"></td><td><pre></pre></td></tr><tr><td data-num=\"86\"></td><td><pre># Enable this and the server will recognise asynchronous ABOR requests. Not</pre></td></tr><tr><td data-num=\"87\"></td><td><pre># recommended for security (the code is non-trivial). Not enabling it,</pre></td></tr><tr><td data-num=\"88\"></td><td><pre># however, may confuse older FTP clients.</pre></td></tr><tr><td data-num=\"89\"></td><td><pre>#async_abor_enable=YES</pre></td></tr><tr><td data-num=\"90\"></td><td><pre></pre></td></tr><tr><td data-num=\"91\"></td><td><pre># By default the server will pretend to allow ASCII mode but in fact ignore</pre></td></tr><tr><td data-num=\"92\"></td><td><pre># the request. Turn on the below options to have the server actually do ASCII</pre></td></tr><tr><td data-num=\"93\"></td><td><pre># mangling on files when in ASCII mode.</pre></td></tr><tr><td data-num=\"94\"></td><td><pre># Beware that on some FTP servers, ASCII support allows a denial of service</pre></td></tr><tr><td data-num=\"95\"></td><td><pre># attack (DoS) via the command \"SIZE /big/file\" in ASCII mode. vsftpd</pre></td></tr><tr><td data-num=\"96\"></td><td><pre># predicted this attack and has always been safe, reporting the size of the</pre></td></tr><tr><td data-num=\"97\"></td><td><pre># raw file.</pre></td></tr><tr><td data-num=\"98\"></td><td><pre># ASCII mangling is a horrible feature of the protocol.</pre></td></tr><tr><td data-num=\"99\"></td><td><pre>#ascii_upload_enable=YES</pre></td></tr><tr><td data-num=\"100\"></td><td><pre>#ascii_download_enable=YES</pre></td></tr><tr><td data-num=\"101\"></td><td><pre></pre></td></tr><tr><td data-num=\"102\"></td><td><pre># You may fully customise the login banner string:</pre></td></tr><tr><td data-num=\"103\"></td><td><pre>#ftpd_banner=Welcome to blah FTP service.</pre></td></tr><tr><td data-num=\"104\"></td><td><pre></pre></td></tr><tr><td data-num=\"105\"></td><td><pre># You may specify a file of disallowed anonymous e-mail addresses. Apparently</pre></td></tr><tr><td data-num=\"106\"></td><td><pre># useful for combatting certain DoS attacks.</pre></td></tr><tr><td data-num=\"107\"></td><td><pre>#deny_email_enable=YES</pre></td></tr><tr><td data-num=\"108\"></td><td><pre># (default follows)</pre></td></tr><tr><td data-num=\"109\"></td><td><pre>#banned_email_file=/etc/vsftpd.banned_emails</pre></td></tr><tr><td data-num=\"110\"></td><td><pre></pre></td></tr><tr><td data-num=\"111\"></td><td><pre># You may restrict local users to their home directories.  See the FAQ for</pre></td></tr><tr><td data-num=\"112\"></td><td><pre># the possible risks in this before using chroot_local_user or</pre></td></tr><tr><td data-num=\"113\"></td><td><pre># chroot_list_enable below.</pre></td></tr><tr><td data-num=\"114\"></td><td><pre>chroot_local_user=YES #用户访问将被限制在当前目录</pre></td></tr><tr><td data-num=\"115\"></td><td><pre></pre></td></tr><tr><td data-num=\"116\"></td><td><pre># You may specify an explicit list of local users to chroot() to their home</pre></td></tr><tr><td data-num=\"117\"></td><td><pre># directory. If chroot_local_user is YES, then this list becomes a list of</pre></td></tr><tr><td data-num=\"118\"></td><td><pre># users to NOT chroot().</pre></td></tr><tr><td data-num=\"119\"></td><td><pre># (Warning! chroot'ing can be very dangerous. If using chroot, make sure that</pre></td></tr><tr><td data-num=\"120\"></td><td><pre># the user does not have write access to the top level directory within the</pre></td></tr><tr><td data-num=\"121\"></td><td><pre># chroot)</pre></td></tr><tr><td data-num=\"122\"></td><td><pre>#chroot_local_user=YES</pre></td></tr><tr><td data-num=\"123\"></td><td><pre>#chroot_list_enable=YES</pre></td></tr><tr><td data-num=\"124\"></td><td><pre># (default follows)</pre></td></tr><tr><td data-num=\"125\"></td><td><pre>#chroot_list_file=/etc/vsftpd.chroot_list</pre></td></tr><tr><td data-num=\"126\"></td><td><pre></pre></td></tr><tr><td data-num=\"127\"></td><td><pre># You may activate the \"-R\" option to the builtin ls. This is disabled by</pre></td></tr><tr><td data-num=\"128\"></td><td><pre># default to avoid remote users being able to cause excessive I/O on large</pre></td></tr><tr><td data-num=\"129\"></td><td><pre># sites. However, some broken FTP clients such as \"ncftp\" and \"mirror\" assume</pre></td></tr><tr><td data-num=\"130\"></td><td><pre># the presence of the \"-R\" option, so there is a strong case for enabling it.</pre></td></tr><tr><td data-num=\"131\"></td><td><pre>#ls_recurse_enable=YES</pre></td></tr><tr><td data-num=\"132\"></td><td><pre></pre></td></tr><tr><td data-num=\"133\"></td><td><pre># Customization</pre></td></tr><tr><td data-num=\"134\"></td><td><pre>#</pre></td></tr><tr><td data-num=\"135\"></td><td><pre># Some of vsftpd's settings don't fit the filesystem layout by</pre></td></tr><tr><td data-num=\"136\"></td><td><pre># default.</pre></td></tr><tr><td data-num=\"137\"></td><td><pre>#</pre></td></tr><tr><td data-num=\"138\"></td><td><pre># This option should be the name of a directory which is empty.  Also, the</pre></td></tr><tr><td data-num=\"139\"></td><td><pre># directory should not be writable by the ftp user. This directory is used</pre></td></tr><tr><td data-num=\"140\"></td><td><pre># as a secure chroot() jail at times vsftpd does not require filesystem</pre></td></tr><tr><td data-num=\"141\"></td><td><pre># access.</pre></td></tr><tr><td data-num=\"142\"></td><td><pre>secure_chroot_dir=/var/run/vsftpd/empty</pre></td></tr><tr><td data-num=\"143\"></td><td><pre></pre></td></tr><tr><td data-num=\"144\"></td><td><pre># This string is the name of the PAM service vsftpd will use.</pre></td></tr><tr><td data-num=\"145\"></td><td><pre>pam_service_name=vsftpd</pre></td></tr><tr><td data-num=\"146\"></td><td><pre></pre></td></tr><tr><td data-num=\"147\"></td><td><pre># This option specifies the location of the RSA certificate to use for SSL</pre></td></tr><tr><td data-num=\"148\"></td><td><pre># encrypted connections.</pre></td></tr><tr><td data-num=\"149\"></td><td><pre>rsa_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem</pre></td></tr><tr><td data-num=\"150\"></td><td><pre>rsa_private_key_file=/etc/ssl/private/ssl-cert-snakeoil.key</pre></td></tr><tr><td data-num=\"151\"></td><td><pre>ssl_enable=NO</pre></td></tr><tr><td data-num=\"152\"></td><td><pre></pre></td></tr><tr><td data-num=\"153\"></td><td><pre></pre></td></tr><tr><td data-num=\"154\"></td><td><pre># Uncomment this to indicate that vsftpd use a utf8 filesystem.</pre></td></tr><tr><td data-num=\"155\"></td><td><pre>utf8_filesystem=YES</pre></td></tr><tr><td data-num=\"156\"></td><td><pre></pre></td></tr><tr><td data-num=\"157\"></td><td><pre></pre></td></tr><tr><td data-num=\"158\"></td><td><pre>no_anon_password=YES #匿名登录是否需要密码</pre></td></tr><tr><td data-num=\"159\"></td><td><pre>anon_root=/home/user/ftp_dir #匿名登录访问的文件路径</pre></td></tr><tr><td data-num=\"160\"></td><td><pre></pre></td></tr><tr><td data-num=\"161\"></td><td><pre>local_root=/ftp_share #实名登录访问的文件路径</pre></td></tr><tr><td data-num=\"162\"></td><td><pre></pre></td></tr><tr><td data-num=\"163\"></td><td><pre>allow_writeable_chroot=YES</pre></td></tr></table></figure><p>编辑完成后， <code>:wq</code>  保存退出。</p>\n<h1 id=\"重新加载配置文件\"><a class=\"anchor\" href=\"#重新加载配置文件\">#</a> 重新加载配置文件</h1>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> /etc/init.d/vsftpd restart</pre></td></tr></table></figure><h1 id=\"启动服务\"><a class=\"anchor\" href=\"#启动服务\">#</a> 启动服务</h1>\n<p>在加载完后，重启服务器：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> systemctl restart vsftpd</pre></td></tr></table></figure><p>查看服务启动状态：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> systemctl status vsftpd</pre></td></tr></table></figure><p><img data-src=\"/ubuntu-ftp-create/image-20221106152005206.png\" alt=\"image-20221106152005206\"></p>\n<p>设置开机启动：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> vsftpd</pre></td></tr></table></figure><p>如果想关闭开机启动：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">sudo</span> systemctl disable vsftpd</pre></td></tr></table></figure><h1 id=\"ftp连接\"><a class=\"anchor\" href=\"#ftp连接\">#</a> FTP 连接</h1>\n<p>本机连接：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[user@localhost] #\"></td><td><pre><span class=\"token function\">ftp</span> <span class=\"token number\">127.0</span>.0.1</pre></td></tr></table></figure><p>其它电脑连接：</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">ftp</span> <span class=\"token function\">ip</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># eg:ftp 192.168.0.3</span></pre></td></tr></table></figure><p>1、输入用户名：（1）匿名：anonymous 或 ftp （2）主机用户名：即你当前主机名。</p>\n<p>2、回车。</p>\n<p>3、如果需要密码则进行相应输入，这里上面配置设了匿名登录不需要密码，所以以匿名登录时没有提示输入密码。</p>\n<p>4、进入到相应的用户访问根目录里（ps：即进入到配置文件中设置的登录访问的文件路径，可以用  <code>ls</code>  查看是否对应上访问的文件目录），这样就可以愉快的玩耍了；输入：  <code>quit</code>  退出。</p>\n<p>eg：本地连接并退出，如下图：</p>\n<p><img data-src=\"/ubuntu-ftp-create/image-20221106164252568.png\" alt=\"image-20221106164252568\"></p>\n<p>windows 下可视化文件访问：按  <code>Win</code>  +  <code>E</code>  快捷键，调用文件资源管理器，输入访问地址，回车：</p>\n<p><img data-src=\"/ubuntu-ftp-create/image-20221106160826118.png\" alt=\"image-20221106160826118\"></p>\n<p>windows 下命令行文件访问：同样按  <code>Win</code>  +  <code>E</code>  快捷键，调用文件资源管理器，然后在输写框跟上面 linux 访问连接一样输入  <code>ftp ip</code>  ，即可跳到 ftp 操作控制台中：</p>\n<p><img data-src=\"/ubuntu-ftp-create/image-20221106161411644.png\" alt=\"image-20221106161411644\"></p>\n<h1 id=\"ftp客户端常用命令\"><a class=\"anchor\" href=\"#ftp客户端常用命令\">#</a> FTP 客户端常用命令</h1>\n<p>在登录进入 ftp 后，可以使用  <code>help</code>  查看可以使用哪些指令操作：</p>\n<p><img data-src=\"/ubuntu-ftp-create/image-20221106163512272.png\" alt=\"image-20221106163512272\"></p>\n<ul>\n<li>\n<p>ls：和 linux 上的 ls 命令类似</p>\n</li>\n<li>\n<p>Ctrl+Shift + L：清屏</p>\n</li>\n<li>\n<p>put：使用  <code>put [本地文件路径+名称]</code>  上传</p>\n</li>\n<li>\n<p>get：使用  <code>get [远程文件路径+名称]</code>  下载</p>\n</li>\n<li>\n<p>mput：批量上传多个文件  <code>mput 文件名1 文件名2</code></p>\n</li>\n<li>\n<p>mget：批量获取多个文件  <code>mget 文件名1 文件名2</code></p>\n</li>\n<li>\n<p>prompt：屏蔽批量输出信息，批量上传下载文件就不需要一直回车确认了</p>\n</li>\n<li>\n<p>quit：退出 ftp 访问</p>\n</li>\n</ul>\n",
            "tags": [
                "history",
                "Linux",
                "Ubuntu"
            ]
        }
    ]
}