<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>命运转轮 • Posts by &#34;linux&#34; tag</title>
        <link>https://arachnid.cc</link>
        <description>不曾亏欠, 不曾辜负, 如此足矣</description>
        <language>zh-CN</language>
        <pubDate>Sun, 05 Feb 2023 14:32:47 +0800</pubDate>
        <lastBuildDate>Sun, 05 Feb 2023 14:32:47 +0800</lastBuildDate>
        <category>电子</category>
        <category>history</category>
        <category>EDA</category>
        <category>C</category>
        <category>MCU</category>
        <category>git</category>
        <category>工具</category>
        <category>FreeRTOS</category>
        <category>hexo</category>
        <category>IDE</category>
        <category>SQL</category>
        <category>JSON</category>
        <category>Linux</category>
        <category>Ubuntu</category>
        <category>RTOS</category>
        <category>算法</category>
        <category>DMX512</category>
        <category>modbus</category>
        <category>Modem</category>
        <item>
            <guid isPermalink="true">https://arachnid.cc/linux-routing-table/</guid>
            <title>Linux 路由表说明</title>
            <link>https://arachnid.cc/linux-routing-table/</link>
            <category>Linux</category>
            <pubDate>Sun, 05 Feb 2023 14:32:47 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;route-命令&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#route-命令&#34;&gt;#&lt;/a&gt; route 命令&lt;/h1&gt;
&lt;p&gt;选项：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-v&lt;/code&gt;  ：显示详细信息。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-n&lt;/code&gt;  ：不执行 DNS 反向查找（即不解析名称），直接显示数字形式的 IP 地址。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-e&lt;/code&gt;  ：netstat 格式显示路由表。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-C&lt;/code&gt;  ：打印 Linux 内核的路由缓存。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;add&lt;/code&gt;  ：增加路由记录 /  &lt;code&gt;del&lt;/code&gt;  ：删除路由记录&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-net&lt;/code&gt;  ：目的地址是一个网络。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-host&lt;/code&gt;  ：目的地址是一台主机。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;netmask&lt;/code&gt;  ：目的地址的网络掩码。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gw&lt;/code&gt;  ：路由数据包通过的网关。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;metric&lt;/code&gt;  ：设置路由跃点。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;eg：&lt;/p&gt;
&lt;p&gt;1、添加主机路由&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;span&gt;添加主机路由&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;route &lt;span class=&#34;token function&#34;&gt;add&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-net&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;10.0&lt;/span&gt;.0.10 netmask &lt;span class=&#34;token number&#34;&gt;255.255&lt;/span&gt;.255.255 gw &lt;span class=&#34;token number&#34;&gt;10.139&lt;/span&gt;.128.1 dev eth0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;route &lt;span class=&#34;token parameter variable&#34;&gt;-n&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Destination     Gateway         Genmask         Flags Metric Ref    Use Iface&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token number&#34;&gt;10.0&lt;/span&gt;.0.10       &lt;span class=&#34;token number&#34;&gt;10.139&lt;/span&gt;.128.1    &lt;span class=&#34;token number&#34;&gt;255.255&lt;/span&gt;.255.255 UGH   &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;      &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; eth0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;..&lt;/span&gt;.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;2、添加网络路由&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;span&gt;添加网络路由&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;route &lt;span class=&#34;token function&#34;&gt;add&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-net&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;10.0&lt;/span&gt;.0.0 netmask &lt;span class=&#34;token number&#34;&gt;255.255&lt;/span&gt;.255.0 gw &lt;span class=&#34;token number&#34;&gt;10.139&lt;/span&gt;.128.1 dev eth0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;route &lt;span class=&#34;token parameter variable&#34;&gt;-n&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Destination     Gateway         Genmask         Flags Metric Ref    Use Iface&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token number&#34;&gt;10.0&lt;/span&gt;.0.0        &lt;span class=&#34;token number&#34;&gt;10.139&lt;/span&gt;.128.1    &lt;span class=&#34;token number&#34;&gt;255.255&lt;/span&gt;.255.0   UG    &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;      &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; eth0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;..&lt;/span&gt;.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;3、添加设置默认网关跃点为 80&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;span&gt;添加设置默认网关&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;route &lt;span class=&#34;token function&#34;&gt;add&lt;/span&gt; default gw &lt;span class=&#34;token number&#34;&gt;192.168&lt;/span&gt;.1.1 metric &lt;span class=&#34;token number&#34;&gt;80&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;route &lt;span class=&#34;token parameter variable&#34;&gt;-n&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Destination     Gateway         Genmask         Flags Metric Ref    Use Iface&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         &lt;span class=&#34;token number&#34;&gt;192.168&lt;/span&gt;.1.1     &lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         UG    &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;      &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; eth0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;..&lt;/span&gt;.&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;4、删除路由&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;span&gt;删除路由&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;route del default gw &lt;span class=&#34;token number&#34;&gt;192.168&lt;/span&gt;.1.1 metric &lt;span class=&#34;token number&#34;&gt;80&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h1 id=&#34;字段分析&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#字段分析&#34;&gt;#&lt;/a&gt; 字段分析&lt;/h1&gt;
&lt;p&gt;使用  &lt;code&gt;route&lt;/code&gt;  or  &lt;code&gt;route -n&lt;/code&gt;  命令查看内核路由表：&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;figcaption data-lang=&#34;bash&#34;&gt;&lt;span&gt;命令行提示符&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;route&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Destination     Gateway         Genmask         Flags Metric Ref    Use Iface&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;default         _gateway        &lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         UG    &lt;span class=&#34;token number&#34;&gt;100&lt;/span&gt;    &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; ens33&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;default         _gateway        &lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         UG    &lt;span class=&#34;token number&#34;&gt;1000&lt;/span&gt;   &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; br0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token number&#34;&gt;192.168&lt;/span&gt;.10.0    &lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         &lt;span class=&#34;token number&#34;&gt;255.255&lt;/span&gt;.255.0   U     &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;      &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; br0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token number&#34;&gt;192.168&lt;/span&gt;.29.0    &lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         &lt;span class=&#34;token number&#34;&gt;255.255&lt;/span&gt;.255.0   U     &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;      &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; ens33&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;_gateway        &lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         &lt;span class=&#34;token number&#34;&gt;255.255&lt;/span&gt;.255.255 UH    &lt;span class=&#34;token number&#34;&gt;100&lt;/span&gt;    &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; ens33&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;[root@localhost] $&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;route &lt;span class=&#34;token parameter variable&#34;&gt;-n&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Destination     Gateway         Genmask         Flags Metric Ref    Use Iface&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         &lt;span class=&#34;token number&#34;&gt;192.168&lt;/span&gt;.29.2    &lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         UG    &lt;span class=&#34;token number&#34;&gt;100&lt;/span&gt;    &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; ens33&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         &lt;span class=&#34;token number&#34;&gt;192.168&lt;/span&gt;.10.1    &lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         UG    &lt;span class=&#34;token number&#34;&gt;1000&lt;/span&gt;   &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; br0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token number&#34;&gt;192.168&lt;/span&gt;.10.0    &lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         &lt;span class=&#34;token number&#34;&gt;255.255&lt;/span&gt;.255.0   U     &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;      &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; br0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token number&#34;&gt;192.168&lt;/span&gt;.29.0    &lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         &lt;span class=&#34;token number&#34;&gt;255.255&lt;/span&gt;.255.0   U     &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;      &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; ens33&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td data-command=&#34;&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token number&#34;&gt;192.168&lt;/span&gt;.29.2    &lt;span class=&#34;token number&#34;&gt;0.0&lt;/span&gt;.0.0         &lt;span class=&#34;token number&#34;&gt;255.255&lt;/span&gt;.255.255 UH    &lt;span class=&#34;token number&#34;&gt;100&lt;/span&gt;    &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;        &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; ens33&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;字段分类说明：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;字段&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Destination&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;目标网络或目标主机。Destination 为 default（ &lt;code&gt;0.0.0.0&lt;/code&gt; ）时，表示这个是默认网关，所有数据都发到这个网关（这里是  &lt;code&gt;10.139.128.1&lt;/code&gt; ）。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Gateway&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;网关地址， &lt;code&gt;0.0.0.0&lt;/code&gt;  表示当前记录对应的 Destination 跟本机在同一个网段，通信时不需要经过网关（同一个局域网内 2 台主机通信不需要经过网关）。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Genmask&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Destination 字段的网络掩码，Destination 是主机时需要设置为  &lt;code&gt;255.255.255.255&lt;/code&gt;  ，是默认路由时会设置为  &lt;code&gt;0.0.0.0&lt;/code&gt;  。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Flags&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;见下文说明。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Metric&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;跃点，指到达指定网络所需的中转数，是大型局域网和广域网设置所必需的 （不在 Linux 内核中使用）。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Ref&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;路由项引用次数 （不在 Linux 内核中使用）。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Use&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;此路由项被路由软件查找的次数。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;Iface&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;网卡名字，例如  &lt;code&gt;eth0&lt;/code&gt;  ；要去往这个网段需要使用哪一个网络接口。也就是  &lt;code&gt;eth0&lt;/code&gt;  这张网卡。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;可以看到 Flags 下面有许多字母组合，他们分别的含义是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;U (route is up)&lt;/strong&gt; ：该路由处于活跃；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;H (target is a host)&lt;/strong&gt; ：目标是一部主机 (IP) 而非网域（子网掩码是 255.255.255.255）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;G (use gateway)&lt;/strong&gt; ：需要透过外部的主机 (gateway) 来转递封包（一般指向默认网关）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;R (reinstate route for dynamic routing)&lt;/strong&gt; ：使用动态路由时，恢复路由资讯的旗标；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;D (dynamically installed by daemon or redirect)&lt;/strong&gt; ：已经由服务或转 port 功能设定为动态路由&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;M (modified from routing daemon or redirect)&lt;/strong&gt; ：路由已经被修改了；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;! (reject route)&lt;/strong&gt; ：这个路由将不会被接受（用来抵挡不安全的网域）。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;路由种类&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#路由种类&#34;&gt;#&lt;/a&gt; 路由种类&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;路由类型&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;子网掩码&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;Flag 字段&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;主机路由&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;255.255.255.255&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;UH&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;指向单个 IP 地址或主机名的路由记录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;网络路由&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;255.255.255.0&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;U&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;代表主机可以到达的网络，比如说目的地址是  &lt;code&gt;192.168.10.xxx&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;默认路由&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;0.0.0.0&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;UG&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;当主机不能在路由表中查找到目标主机的 IP 时，数据包就发到默认路由上&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/linux-system-constitute/</guid>
            <title>Linux 系统构成：bootloader、kernel、rootfs</title>
            <link>https://arachnid.cc/linux-system-constitute/</link>
            <category>Linux</category>
            <pubDate>Thu, 02 Feb 2023 19:34:26 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;前言&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#前言&#34;&gt;#&lt;/a&gt; 前言&lt;/h1&gt;
&lt;p&gt;完整的 linux 系統需要以下部分：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Bootloader
&lt;ul&gt;
&lt;li&gt;Device tree blob&lt;/li&gt;
&lt;li&gt;boot.img&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Linux Kernel（Linux 内核）&lt;/li&gt;
&lt;li&gt;Root Filesystem（根目录文件系統）&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;bootloader&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#bootloader&#34;&gt;#&lt;/a&gt; bootloader&lt;/h1&gt;
&lt;p&gt;bootloader（引导装载程序）就是在操作系统内核运行之前运行的一段小程序。通过这段小程序，我们可以初始化硬件设备、建立内存空间的映射图，从而将系统的软硬件环境设置成一个合适的状态，以便为最终调用操作系统内核准备好正确的环境。&lt;/p&gt;
&lt;p&gt;常见的 bootloader 有 PC 平台的 Grub；嵌入式平台的 vivi, RedBoot, u-boot 等，其中 u-boot 在使用上最广泛，因此在嵌入式中又常称 linux 系统构成为 u-boot、kernel、rootfs。&lt;/p&gt;
&lt;p&gt;bootloader 是严重地依赖于硬件而实现的，特别是在嵌入式系统。因此，在嵌入式系统里建立一个通用的 bootloader 几乎是不可能的。尽管如此，我们仍然可以对 bootloader 归纳出一些通用的概念来，以指导用户进行特定的 bootloader 设计与实现。&lt;/p&gt;
&lt;p&gt;在嵌入式系统中，bootloader 的意义与作用相当于 PC 平台中的 BIOS + Grub，它对开发板上的主要部件如 CPU、SDRAM、FLASH、串口等进行了初始化，可以使用 bootloader 下载文件到开发板，可以浏览目录，可以烧录 flash，可以启动系统等，实际上，一个功能比较强大的 bootloader 已经相当于一个微型的操作系统了。&lt;/p&gt;
&lt;p&gt;总体上 bootloader 需要完成以下工作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;初始化 CPU 速度；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;初始化内存，包括初始化内存配置寄存器等；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;初始化中断控制器，在系统启动时，关闭中断，关闭看门狗；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;初始化串行端口（如果在目标上有的话）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;启用指令 / 数据高速缓存；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置堆栈指针；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置参数区域并构造参数结构和标记（这是重要的一步，因为内核在标识根设备、页面大小、内存大小以及更多内容时可能需要使用引导参数）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;执行 POST（加电自检）来标识存在的设备并报告有何问题；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;为电源管理提供挂起 / 恢复支持；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;传输操作系统内核镜像文件到目标机。也可以将操作系统内核镜像文件事先存放在 Flash 中，这样就不需要 bootLoader 和主机传输操作系统内核镜像文件，这通常是在做成产品的情况下使用。而一般在开发过程中，为了调试内核的方便，不将操作系统内核镜像文件固化在 Flash 中，这就需要主机和目标机进行文件传输；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;跳转到内核的开始，在此又分为 ROM 启动和 RAM 启动。所谓 ROM 启动就是用 XIP 技术直接在 Flash 中执行操作系统镜像文件；所谓 RAM 启动就是指把内核镜像从 Flash 复制到 RAM 中，然后再将 PC 指针跳转到 RAM 中的操作系统启动地址。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;目前使用的主流&lt;strong&gt;嵌入式平台&lt;/strong&gt;，几乎都是用 u-boot 作为启动引导，u-boot 有哪些突出的优点呢？&lt;/p&gt;
&lt;p&gt;① 开放源码：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3UtYm9vdC91LWJvb3QlRUYlQkMlOUI=&#34;&gt;https://github.com/u-boot/u-boot；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;② 支持多种嵌入式操作系统内核，如 Linux、NetBSD, VxWorks, QNX, RTEMS, ARTOS, LynxOS, android；&lt;/p&gt;
&lt;p&gt;③ 支持多个处理器系列，如 PowerPC、ARM、x86、MIPS；&lt;/p&gt;
&lt;p&gt;④ 较高的可靠性和稳定性；&lt;/p&gt;
&lt;p&gt;⑤ 高度灵活的功能设置，适合 u-boot 调试、操作系统不同引导要求、产品发布等；&lt;/p&gt;
&lt;p&gt;⑥ 丰富的设备驱动源码，如串口、以太网、SDRAM、FLASH、LCD、NVRAM、EEPROM、RTC、键盘等；&lt;/p&gt;
&lt;p&gt;⑦ 较为丰富的开发调试文档与强大的网络技术支持。&lt;/p&gt;
&lt;h1 id=&#34;kernel&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#kernel&#34;&gt;#&lt;/a&gt; kernel&lt;/h1&gt;
&lt;p&gt;kernel 即 linux 内核。内核源代码可以免费从&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cua2VybmVsLm9yZy8=&#34;&gt;官网&lt;/span&gt;获取，这是一个通用的内核，里面包含着内核支持的所有的硬件平台及驱动的所有代码，是一个大而全的内核源代码。&lt;/p&gt;
&lt;p&gt;在使用层面上，当嵌入式平台使用 linux 系统，那么最重要的就是 kernel 中驱动的移植；一般都不会从一个纯净的 kernel 中去进行移植操作，而是根据芯片厂商提供的 kernel 对特定的硬件平台及设备进行各种外设驱动相关的适配工作。&lt;/p&gt;
&lt;h2 id=&#34;device-tree&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#device-tree&#34;&gt;#&lt;/a&gt; Device Tree&lt;/h2&gt;
&lt;p&gt;设备树（Device Tree）是描述计算机的特定硬件设备信息的数据结构，以便于操作系统的内核可以管理和使用这些硬件，包括 CPU 或 CPU，内存，总线和其他一些外设。&lt;/p&gt;
&lt;p&gt;老版本的 linux kernel 是没有设备树概念的，后来因为 SOC 的发展，kernel 中需要对这些新增的 SOC 进行支持，而这些代码都会编译到 kernel 中，会导致 kernel 日渐臃肿，于是后面就引入了在 PowerPC 等架构就已经采用的设备树。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1、dts (device tree source 设备树源文件)&lt;/strong&gt;&lt;br /&gt;
 dts 文件是一种 ASCII 文本格式的设备树描述文件，此文件适合人类阅读主要是给用户看的。一个  &lt;code&gt;.dts&lt;/code&gt;  文件对应一个 ARM 的设备，一般放置在  &lt;code&gt;arch/arm/boot/dts/&lt;/code&gt;  中。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2、dtsi (device tree source include 设备树头文件)&lt;/strong&gt;&lt;br /&gt;
 由于  &lt;code&gt;.dts&lt;/code&gt;  中包含了很多公共部分，linux 内核为了简化，将 Soc 公共部分提炼为  &lt;code&gt;.dtsi&lt;/code&gt;  文件，类似 c 语言中的  &lt;code&gt;.h&lt;/code&gt;  文件。当然，和 C 语言的头文件类似，.dtsi 也可以 include 其他的  &lt;code&gt;.dtsi&lt;/code&gt;  ，譬如几乎所有的 ARM SoC 的  &lt;code&gt;.dtsi&lt;/code&gt;  都引用了 &lt;code&gt;skeleton.dtsi&lt;/code&gt;  。对于同一个节点的设置情况， &lt;code&gt;.dts&lt;/code&gt;  中的配置会覆盖  &lt;code&gt;.dtsi&lt;/code&gt;  中的配置；因此， &lt;code&gt;.dtsi&lt;/code&gt;  一般写 Soc 共性部分，而  &lt;code&gt;.dts&lt;/code&gt;  一般写目标单板特性部分，所以一般  &lt;code&gt;.dts&lt;/code&gt;  包含并重写部分  &lt;code&gt;.dtsi&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3、dtb (device tree blob 设备树二进制文件)&lt;/strong&gt;&lt;br /&gt;
 &lt;code&gt;.dts&lt;/code&gt;  通过 dtc 编译工具编译成  &lt;code&gt;.dtb&lt;/code&gt;  文件，被编译后的设备树文件与内核一同放入到存储介质中，当内核启动时读取设备树文件，就可以动态的将板级信息写入到内核中。&lt;/p&gt;
&lt;h1 id=&#34;rootfs&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#rootfs&#34;&gt;#&lt;/a&gt; rootfs&lt;/h1&gt;
&lt;p&gt;rootfs（Root Filesystem）即根目录文件系统，是 kernel 启动后挂载的第一个文件系统。rootfs 和 kernel 是分开的，但单独的 kernel 没有 rootfs 是没法正常工作的。在系统终端执行  &lt;code&gt;cd /&lt;/code&gt;  即可看到当前的文件系统内容了。&lt;/p&gt;
&lt;p&gt;现在有许多制作 rootfs 的工具，如 busybox，buildroot，Yocto 等。其中 buildroot 中包含了 busybox 的功能，只需要简单的操作就可以生成一个 rootfs 了。&lt;/p&gt;
&lt;h1 id=&#34;参考&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#参考&#34;&gt;#&lt;/a&gt; 参考&lt;/h1&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9xMjQ4MjY5NjczLnBpeG5ldC5uZXQvYmxvZy9wb3N0LzY5NTcwMjc5&#34;&gt;完整的 linux 系統：bootloader、linux kernel（linux 內核）、rootfile（根文件系統）&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3d3dy5lbWJlZGRlZGxpbnV4Lm9yZy5jbi9lbWJsaW51eGFwcGRldi8=&#34;&gt;嵌入式 linux 应用开发&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oYWNrbWQuaW8vQGEyOTY1NDA2OC9ISjF1VVlFOHI=&#34;&gt;Linux 筆記 2&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDg0MjAxMjYvd2hhdC1pcy10aGUtZGlmZmVyZW5jZS1iZXR3ZWVuLWR0cy1maWxlLWFuZC1kdHNpLWZpbGU=&#34;&gt;What is the difference between .dts file and .dtsi file?&lt;/span&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/ubuntu-ftp-create/</guid>
            <title>Ubuntu下 FTP的搭建配置</title>
            <link>https://arachnid.cc/ubuntu-ftp-create/</link>
            <category>history</category>
            <category>Linux</category>
            <category>Ubuntu</category>
            <pubDate>Thu, 03 Nov 2022 21:13:57 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;平台：Ubuntu 18.04.6&lt;/p&gt;
&lt;p&gt;vsftpd 官网：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zZWN1cml0eS5hcHBzcG90LmNvbS92c2Z0cGQuaHRtbA==&#34;&gt;https://security.appspot.com/vsftpd.html&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装&#34;&gt;#&lt;/a&gt; 安装&lt;/h1&gt;
&lt;p&gt;安装 FTP 服务，命令行输入：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;apt-get&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; vsftpd&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h1 id=&#34;配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#配置&#34;&gt;#&lt;/a&gt; 配置&lt;/h1&gt;
&lt;p&gt;先备份配置文件：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;cp&lt;/span&gt; /etc/vsftpd.conf /etc/vsftpd.conf.back&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;vim 进入编辑信息：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;vim&lt;/span&gt; /etc/vsftpd.conf&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;然后增加或修改以下信息：&lt;/p&gt;
&lt;figure class=&#34;highlight makefile&#34;&gt;&lt;figcaption data-lang=&#34;makefile&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Example config file /etc/vsftpd.conf&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# The default compiled in settings are fairly paranoid. This sample file&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# loosens things up a bit, to make the ftp daemon more usable.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Please see vsftpd.conf.5 for all compiled in defaults.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# READ THIS: This example file is NOT an exhaustive list of vsftpd options.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd&#39;s&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# capabilities.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Run standalone?  vsftpd can run either from an inetd or as a standalone&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# daemon started from an initscript.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;listen&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;NO &lt;span class=&#34;token comment&#34;&gt;#是否开启侦听状态&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# This directive enables listening on IPv6 sockets. By default, listening&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# on the IPv6 &#34;any&#34; address (::) will accept connections from both IPv6&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# and IPv4 clients. It is not necessary to listen on *both* IPv4 and IPv6&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# sockets. If you want that (perhaps because you want to listen on specific&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# addresses) then you must run two copies of vsftpd with two configuration&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# files.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;listen_ipv6&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES &lt;span class=&#34;token comment&#34;&gt;#如果能使用 ipv6 的可以打开使用；只能用 ipv4 的必须注释掉，不然重启不了&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Allow anonymous FTP? (Disabled by default).&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;anonymous_enable&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES &lt;span class=&#34;token comment&#34;&gt;#允许匿名用户登录&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Uncomment this to allow local users to log in.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;local_enable&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES &lt;span class=&#34;token comment&#34;&gt;#允许实名登录&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Uncomment this to enable any form of FTP write command.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;31&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;write_enable&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES &lt;span class=&#34;token comment&#34;&gt;#允许实名用户进行写操作&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;32&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;33&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Default umask for local users is 077. You may wish to change this to 022,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;34&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# if your users expect that (022 is used by most other ftpd&#39;s)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;35&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#local_umask=022&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;36&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;37&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Uncomment this to allow the anonymous FTP user to upload files. This only&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;38&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# has an effect if the above global write enable is activated. Also, you will&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;39&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# obviously need to create a directory writable by the FTP user.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;40&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;anon_upload_enable&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES &lt;span class=&#34;token comment&#34;&gt;#允许匿名用户上传文件&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;41&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;42&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Uncomment this if you want the anonymous FTP user to be able to create&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;43&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# new directories.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;44&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;anon_mkdir_write_enable&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES &lt;span class=&#34;token comment&#34;&gt;#允许匿名用户创建目录&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;45&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;46&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Activate directory messages - messages given to remote users when they&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;47&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# go into a certain directory.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;48&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;dirmessage_enable&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;49&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;50&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# If enabled, vsftpd will display directory listings with the time&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;51&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# in  your  local  time  zone.  The default is to display GMT. The&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;52&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# times returned by the MDTM FTP command are also affected by this&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;53&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# option.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;54&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;use_localtime&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;55&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;56&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Activate logging of uploads/downloads.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;57&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;xferlog_enable&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;58&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;59&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Make sure PORT transfer connections originate from port 20 (ftp-data).&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;60&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;connect_from_port_20&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;61&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;62&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# If you want, you can arrange for uploaded anonymous files to be owned by&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;63&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# a different user. Note! Using &#34;root&#34; for uploaded files is not&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;64&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# recommended!&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;65&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#chown_uploads=YES&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;66&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#chown_username=whoever&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;67&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;68&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# You may override where the log file goes if you like. The default is shown&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;69&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# below.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;70&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#xferlog_file=/var/log/vsftpd.log&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;71&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;72&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# If you want, you can have your log file in standard ftpd xferlog format.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;73&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Note that the default log file location is /var/log/xferlog in this case.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;74&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#xferlog_std_format=YES&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;75&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;76&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# You may change the default value for timing out an idle session.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;77&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#idle_session_timeout=600&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;78&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;79&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# You may change the default value for timing out a data connection.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;80&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#data_connection_timeout=120&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;81&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;82&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# It is recommended that you define on your system a unique user which the&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;83&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# ftp server can use as a totally isolated and unprivileged user.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;84&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#nopriv_user=ftpsecure&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;85&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;86&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Enable this and the server will recognise asynchronous ABOR requests. Not&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;87&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# recommended for security (the code is non-trivial). Not enabling it,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;88&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# however, may confuse older FTP clients.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;89&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#async_abor_enable=YES&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;90&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;91&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# By default the server will pretend to allow ASCII mode but in fact ignore&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;92&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# the request. Turn on the below options to have the server actually do ASCII&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;93&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# mangling on files when in ASCII mode.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;94&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Beware that on some FTP servers, ASCII support allows a denial of service&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;95&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# attack (DoS) via the command &#34;SIZE /big/file&#34; in ASCII mode. vsftpd&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;96&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# predicted this attack and has always been safe, reporting the size of the&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;97&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# raw file.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;98&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# ASCII mangling is a horrible feature of the protocol.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;99&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#ascii_upload_enable=YES&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;100&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#ascii_download_enable=YES&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;101&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;102&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# You may fully customise the login banner string:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;103&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#ftpd_banner=Welcome to blah FTP service.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;104&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;105&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# You may specify a file of disallowed anonymous e-mail addresses. Apparently&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;106&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# useful for combatting certain DoS attacks.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;107&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#deny_email_enable=YES&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;108&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# (default follows)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;109&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#banned_email_file=/etc/vsftpd.banned_emails&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;110&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;111&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# You may restrict local users to their home directories.  See the FAQ for&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;112&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# the possible risks in this before using chroot_local_user or&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;113&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# chroot_list_enable below.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;114&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;chroot_local_user&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES &lt;span class=&#34;token comment&#34;&gt;#用户访问将被限制在当前目录&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;115&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;116&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# You may specify an explicit list of local users to chroot() to their home&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;117&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# directory. If chroot_local_user is YES, then this list becomes a list of&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;118&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# users to NOT chroot().&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;119&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# (Warning! chroot&#39;ing can be very dangerous. If using chroot, make sure that&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;120&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# the user does not have write access to the top level directory within the&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;121&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# chroot)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;122&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#chroot_local_user=YES&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;123&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#chroot_list_enable=YES&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;124&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# (default follows)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;125&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#chroot_list_file=/etc/vsftpd.chroot_list&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;126&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;127&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# You may activate the &#34;-R&#34; option to the builtin ls. This is disabled by&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;128&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# default to avoid remote users being able to cause excessive I/O on large&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;129&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# sites. However, some broken FTP clients such as &#34;ncftp&#34; and &#34;mirror&#34; assume&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;130&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# the presence of the &#34;-R&#34; option, so there is a strong case for enabling it.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;131&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#ls_recurse_enable=YES&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;132&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;133&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Customization&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;134&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;135&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Some of vsftpd&#39;s settings don&#39;t fit the filesystem layout by&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;136&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# default.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;137&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;138&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# This option should be the name of a directory which is empty.  Also, the&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;139&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# directory should not be writable by the ftp user. This directory is used&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;140&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# as a secure chroot() jail at times vsftpd does not require filesystem&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;141&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# access.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;142&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;secure_chroot_dir&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/var/run/vsftpd/empty&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;143&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;144&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# This string is the name of the PAM service vsftpd will use.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;145&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;pam_service_name&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;vsftpd&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;146&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;147&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# This option specifies the location of the RSA certificate to use for SSL&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;148&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# encrypted connections.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;149&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;rsa_cert_file&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/etc/ssl/certs/ssl-cert-snakeoil.pem&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;150&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;rsa_private_key_file&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/etc/ssl/&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;/ssl-cert-snakeoil.key&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;151&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;ssl_enable&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;NO&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;152&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;153&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;154&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# Uncomment this to indicate that vsftpd use a utf8 filesystem.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;155&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;utf8_filesystem&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;156&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;157&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;158&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;no_anon_password&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES &lt;span class=&#34;token comment&#34;&gt;#匿名登录是否需要密码&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;159&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;anon_root&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/home/frd_lzy &lt;span class=&#34;token comment&#34;&gt;#匿名登录访问的文件路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;160&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;161&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;local_root&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;/projects &lt;span class=&#34;token comment&#34;&gt;#实名登录访问的文件路径&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;162&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;163&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;allow_writeable_chroot&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;YES&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;编辑完成后， &lt;code&gt;:wq&lt;/code&gt;  保存退出。&lt;/p&gt;
&lt;h1 id=&#34;重新加载配置文件&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#重新加载配置文件&#34;&gt;#&lt;/a&gt; 重新加载配置文件&lt;/h1&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; /etc/init.d/vsftpd restart&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h1 id=&#34;启动服务&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#启动服务&#34;&gt;#&lt;/a&gt; 启动服务&lt;/h1&gt;
&lt;p&gt;在加载完后，重启服务器：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; systemctl restart vsftpd&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;查看服务启动状态：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; systemctl status vsftpd&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;img data-src=&#34;image-20221106152005206.png&#34; alt=&#34;image-20221106152005206&#34; /&gt;&lt;/p&gt;
&lt;p&gt;设置开机启动：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; systemctl &lt;span class=&#34;token builtin class-name&#34;&gt;enable&lt;/span&gt; vsftpd&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;如果想关闭开机启动：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; systemctl disable vsftpd&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h1 id=&#34;ftp连接&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ftp连接&#34;&gt;#&lt;/a&gt; FTP 连接&lt;/h1&gt;
&lt;p&gt;本机连接：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;ftp&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;127.0&lt;/span&gt;.0.1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;其它电脑连接：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;ftp&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;ip&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# eg:ftp 192.168.0.3&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;1、输入用户名：（1）匿名：anonymous 或 ftp （2）主机用户名：即你当前主机名。&lt;/p&gt;
&lt;p&gt;2、回车。&lt;/p&gt;
&lt;p&gt;3、如果需要密码则进行相应输入，这里上面配置设了匿名登录不需要密码，所以以匿名登录时没有提示输入密码。&lt;/p&gt;
&lt;p&gt;4、进入到相应的用户访问根目录里（ps：即进入到配置文件中设置的登录访问的文件路径，可以用  &lt;code&gt;ls&lt;/code&gt;  查看是否对应上访问的文件目录），这样就可以愉快的玩耍了；输入：  &lt;code&gt;quit&lt;/code&gt;  退出。&lt;/p&gt;
&lt;p&gt;eg：本地连接并退出，如下图：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20221106164252568.png&#34; alt=&#34;image-20221106164252568&#34; /&gt;&lt;/p&gt;
&lt;p&gt;windows 下可视化文件访问：按  &lt;code&gt;Win&lt;/code&gt;  +  &lt;code&gt;E&lt;/code&gt;  快捷键，调用文件资源管理器，输入访问地址，回车：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20221106160826118.png&#34; alt=&#34;image-20221106160826118&#34; /&gt;&lt;/p&gt;
&lt;p&gt;windows 下命令行文件访问：同样按  &lt;code&gt;Win&lt;/code&gt;  +  &lt;code&gt;E&lt;/code&gt;  快捷键，调用文件资源管理器，然后在输写框跟上面 linux 访问连接一样输入  &lt;code&gt;ftp ip&lt;/code&gt;  ，即可跳到 ftp 操作控制台中：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20221106161411644.png&#34; alt=&#34;image-20221106161411644&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;ftp客户端常用命令&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ftp客户端常用命令&#34;&gt;#&lt;/a&gt; FTP 客户端常用命令&lt;/h1&gt;
&lt;p&gt;在登录进入 ftp 后，可以使用  &lt;code&gt;help&lt;/code&gt;  查看可以使用哪些指令操作：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20221106163512272.png&#34; alt=&#34;image-20221106163512272&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ls：和 linux 上的 ls 命令类似&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ctrl+Shift + L：清屏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;put：使用  &lt;code&gt;put [本地文件路径+名称]&lt;/code&gt;  上传&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;get：使用  &lt;code&gt;get [远程文件路径+名称]&lt;/code&gt;  下载&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mput：批量上传多个文件  &lt;code&gt;mput 文件名1 文件名2&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mget：批量获取多个文件  &lt;code&gt;mget 文件名1 文件名2&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;prompt：屏蔽批量输出信息，批量上传下载文件就不需要一直回车确认了&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;quit：退出 ftp 访问&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://arachnid.cc/arch-linux-install/</guid>
            <title>基于官方指导安装 Arch Linux</title>
            <link>https://arachnid.cc/arch-linux-install/</link>
            <category>history</category>
            <category>Linux</category>
            <pubDate>Tue, 12 Apr 2022 11:02:19 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;官方 wiki 安装中文指导：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvSW5zdGFsbGF0aW9uX2d1aWRlXyglRTclQUUlODAlRTQlQkQlOTMlRTQlQjglQUQlRTYlOTYlODcp&#34;&gt;https://wiki.archlinux.org/title/Installation_guide_(简体中文)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;最好还是以&lt;strong&gt;英文版&lt;/strong&gt;的为基准，因为 ArchLinux 是一个激进的系统，更新比较快，可能刚写完这篇笔记，转头已经有些对应不上了，哈哈哈。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;系统镜像&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#系统镜像&#34;&gt;#&lt;/a&gt; 系统镜像&lt;/h2&gt;
&lt;p&gt;官方镜像下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9hcmNobGludXgub3JnL2Rvd25sb2FkLw==&#34;&gt;https://archlinux.org/download/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;当然，也可以去各大高校提供的镜像源网站下载。&lt;/p&gt;
&lt;h2 id=&#34;启动盘制作&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#启动盘制作&#34;&gt;#&lt;/a&gt; 启动盘制作&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;1、windows 平台&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;可以使用 Rufus：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ydWZ1cy5pZS96aC8=&#34;&gt;https://rufus.ie/zh/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;这是一款开源、免费、小巧（1.1mb）纯粹的系统启动盘制作工具。&lt;br /&gt;
目前所支持的 ISO 镜像如下：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20220412112425056.png&#34; alt=&#34;image-20220412112425056&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2、Uinx 平台&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;类 Unix 系统可以直接使用  &lt;code&gt;dd&lt;/code&gt;  命令来制作启动盘。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dd&lt;/code&gt;  命令使用可参考：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1jb21tLWRkLmh0bWw=&#34;&gt;https://www.runoob.com/linux/linux-comm-dd.html&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3、多平台&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;可以使用开源的 etcher：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuYmFsZW5hLmlvL2V0Y2hlci8=&#34;&gt;https://www.balena.io/etcher/&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;然后本篇文章是基于官方指导的总结分析安装的笔记，如下开始正式安装配置，因为是以官方 wiki 安装为指导，所以下面用到的操作的标题将一一对应官方 wiki 的标题，没用到的将忽略不写，以及需要增加的将给出说明。目前使用的镜像版本： &lt;code&gt;archlinux-2022.04.01-x86_64.iso&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;引导安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#引导安装&#34;&gt;#&lt;/a&gt; 引导安装&lt;/h2&gt;
&lt;p&gt;Arch 的启动引导过程有两种：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQklPUw==&#34;&gt;BIOS&lt;/span&gt; 和 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvVUVGSQ==&#34;&gt;UEFI&lt;/span&gt; 系统，这两者的引导过程是完全不同的。在 Arch 中它们的引导加载及区别可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvQXJjaF9ib290X3Byb2Nlc3M=&#34;&gt;https://wiki.archlinux.org/title/Arch_boot_process&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;目前大部分设备的引导方式主要分为  &lt;code&gt;UEFI 引导 + GPT 分区表&lt;/code&gt;  和  &lt;code&gt;BIOS(LEGACY) 引导 + MBR 分区表&lt;/code&gt;  这两种，而在新的机器里大部分都采用了  &lt;code&gt;UEFI/GPT&lt;/code&gt;  引导的方式，当然，同时也兼容  &lt;code&gt;BIOS/MBR&lt;/code&gt;  。&lt;/p&gt;
&lt;p&gt;UEFI 进入：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20220412115757611.png&#34; alt=&#34;image-20220412115757611&#34; /&gt;&lt;/p&gt;
&lt;p&gt;BIOS 进入：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20220412120426116.png&#34; alt=&#34;image-20220412120426116&#34; /&gt;&lt;/p&gt;
&lt;p&gt;启动安装后，最终界面出现的效果是一样的：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20220412153955531.png&#34; alt=&#34;image-20220412153955531&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;验证引导模式&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#验证引导模式&#34;&gt;#&lt;/a&gt; 验证引导模式&lt;/h2&gt;
&lt;p&gt;键入如下命令：（ &lt;code&gt;ls&lt;/code&gt; ：表示列出目录内容；后面的路径可以利用 Tab 键 自动补全，即键入命令或文件名的前几个字符，然后按 [Tab] 键）&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ls /sys/firmware/efi/efivars
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果命令结果显示了目录且没有报告错误，则系统以 UEFI 模式引导。&lt;/p&gt;
&lt;p&gt;如果目录不存在，则系统可能 **（注意是可能，并不一定确是 BIOS 模式）** 以 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvemg6QklPUw==&#34;&gt;BIOS&lt;/span&gt; 模式 (或 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29tcGF0aWJpbGl0eV9TdXBwb3J0X01vZHVsZQ==&#34;&gt;CSM&lt;/span&gt; 模式) 引导，如显示：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ls: cannot access &#39;/sys/firmware/efi/efivars&#39;: No such file or directory
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;对于一些不是新的 / 格式过的磁盘，可能就不太适用了，当然，最好方法就是查看安装的主分区磁盘的属性。&lt;/p&gt;
&lt;h2 id=&#34;连接到因特网&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#连接到因特网&#34;&gt;#&lt;/a&gt; 连接到因特网&lt;/h2&gt;
&lt;p&gt;1、检查网络接口是否启用&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip link
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2、连接到网络&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;有线：连接网线，并保证上级路由有网。&lt;/li&gt;
&lt;li&gt;无线：使用 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvSXdkXyglRTclQUUlODAlRTQlQkQlOTMlRTQlQjglQUQlRTYlOTYlODcpI2l3Y3Rs&#34;&gt;iwctl&lt;/span&gt; 验证无线网络，具体操作点击链接查看。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;3、配置网络连接&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;动态：需要支持 DHCP，然后执行以下命令。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;dhcpcd
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;静态：直接按照 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvTmV0d29ya19jb25maWd1cmF0aW9uXyglRTclQUUlODAlRTQlQkQlOTMlRTQlQjglQUQlRTYlOTYlODcpIyVFOSU5RCU5OSVFNiU4MCU4MV9JUF8lRTUlOUMlQjAlRTUlOUQlODA=&#34;&gt;静态 IP 地址&lt;/span&gt; 这个链接进行操作。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;4、检查网络连接&lt;/p&gt;
&lt;p&gt;在确认无误完成上面的操作后，通过 PING IP 来检查：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ping archlinux.org
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;**note：** 关于网络部分的，详情请看 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvTmV0d29ya19jb25maWd1cmF0aW9u&#34;&gt;https://wiki.archlinux.org/title/Network_configuration&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;更新系统时间&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#更新系统时间&#34;&gt;#&lt;/a&gt; 更新系统时间&lt;/h2&gt;
&lt;p&gt;执行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;timedatectl set-ntp true
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后正常情况下是并没有输出的，所谓没有消息就是最好的消息，这就是 Linux/Unix 系统的设计思想。&lt;/p&gt;
&lt;p&gt;最后，执行如下命令来检查服务状态：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;timedatectl status
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;建立硬盘分区&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#建立硬盘分区&#34;&gt;#&lt;/a&gt; 建立硬盘分区&lt;/h2&gt;
&lt;p&gt;系统如果识别到磁盘，就会将其分配为一个块设备，如  &lt;code&gt;/dev/sda&lt;/code&gt; 、 &lt;code&gt;/dev/nvme0n1&lt;/code&gt;  或  &lt;code&gt;/dev/mmcblk0&lt;/code&gt;  等等。然后可以执行如下命令查看：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;fdisk -l
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后，针对不同的引导方式，其分区布局是不一样的，以官方给出的分区为例：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;UEFI 与&lt;/strong&gt; &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvUGFydGl0aW9uaW5nXyglRTclQUUlODAlRTQlQkQlOTMlRTQlQjglQUQlRTYlOTYlODcpI0dVSURfJUU1JTg4JTg2JUU1JThDJUJBJUU4JUExJUE4&#34;&gt;GPT&lt;/span&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;挂载点&lt;/th&gt;
&lt;th&gt;分区&lt;/th&gt;
&lt;th&gt;分区类型&lt;/th&gt;
&lt;th&gt;建议大小&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;/mnt/boot&lt;/td&gt;
&lt;td&gt;/dev/&lt;em&gt;efi_system_partition&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;EFI 系统分区&lt;/td&gt;
&lt;td&gt;至少 300 MiB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[SWAP]&lt;/td&gt;
&lt;td&gt;/dev/&lt;em&gt;swap_partition&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;Linux swap (交换空间)&lt;/td&gt;
&lt;td&gt;大于 512 MiB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/mnt&lt;/td&gt;
&lt;td&gt;/dev/&lt;em&gt;root_partition&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;Linux x86-64 根目录 (/)&lt;/td&gt;
&lt;td&gt;剩余空间&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;BIOS 与&lt;/strong&gt; &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvUGFydGl0aW9uaW5nXyglRTclQUUlODAlRTQlQkQlOTMlRTQlQjglQUQlRTYlOTYlODcpI01hc3Rlcl9Cb290X1JlY29yZA==&#34;&gt;MBR&lt;/span&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;挂载点&lt;/th&gt;
&lt;th&gt;分区&lt;/th&gt;
&lt;th&gt;分区类型&lt;/th&gt;
&lt;th&gt;建议大小&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;[SWAP]&lt;/td&gt;
&lt;td&gt;/dev/&lt;em&gt;swap_partition&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;Linux swap (交换空间)&lt;/td&gt;
&lt;td&gt;大于 512 MiB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/mnt&lt;/td&gt;
&lt;td&gt;/dev/&lt;em&gt;root_partition&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;Linux x86-64 根目录 (/)&lt;/td&gt;
&lt;td&gt;剩余空间&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;然后在这里拓展一下  &lt;code&gt;MiB&lt;/code&gt;  跟  &lt;code&gt;MB&lt;/code&gt;  这两个单位， &lt;code&gt;MB&lt;/code&gt;  是国际单位制 SI 制定的十进制标准单位制，这个 M 是 1000K，而  &lt;code&gt;MiB&lt;/code&gt;  是国际电工委员会 IEC 制定的二进制标准，这个 M 是 1024K 。参看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9waHlzaWNzLm5pc3QuZ292L2N1dS9Vbml0cy9iaW5hcnkuaHRtbA==&#34;&gt;https://physics.nist.gov/cuu/Units/binary.html&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;其它的布局实例可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvUGFydGl0aW9uaW5nXyglRTclQUUlODAlRTQlQkQlOTMlRTQlQjglQUQlRTYlOTYlODcpIyVFNSVCOCU4MyVFNSVCMSU4MCVFNyVBNCVCQSVFNCVCRSU4Qg==&#34;&gt;https://wiki.archlinux.org/title/Partitioning_(简体中文)# 布局示例&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在了解上面的布局后，然后我们常用的引导方式有  &lt;code&gt;UEFI 引导 + GPT 分区表&lt;/code&gt;  和  &lt;code&gt;BIOS(LEGACY) 引导 + MBR 分区表&lt;/code&gt;  这两种，所以下面分开说明：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;BIOS/MBR&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这种方式相对于另一种比较简单，所以就先说了。&lt;/p&gt;
&lt;p&gt;首先，先来了解一下  &lt;code&gt;[SWAP]&lt;/code&gt;  挂载点和  &lt;code&gt;/mnt&lt;/code&gt;  挂载点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;[SWAP]&lt;/code&gt; ：swap 分区通常被称为交换分区，这是一块特殊的硬盘空间，即当实际内存（物理内存，可以理解为内存条容量）不够用的时候，操作系统会从内存中取出一部分暂时不用的数据，放在交换分区中，从而为当前运行的程序腾出足够的内存空间（有点类似于 windows 系统下的虚拟内存）。也就是说，当内存不够用时，我们使用 swap 分区来临时顶替，等到那些程序要运行时，再从 swap 中恢复保存的数据到内存中。这种 “拆东墙，补西墙” 的方式应用于几乎所有的操作系统中。&lt;/p&gt;
&lt;p&gt;使用 swap 交换分区，显著的优点是，通过操作系统的调度，应用程序实际可以使用的内存空间将远远超过系统的物理内存。&lt;/p&gt;
&lt;p&gt;那么 swap 分区到底设置成多大才最优？少了又觉得不够，多了又感觉浪费，那么我们可以参考 Redhat 官方文档中 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9hY2Nlc3MucmVkaGF0LmNvbS9kb2N1bWVudGF0aW9uL2VuLXVzL3JlZF9oYXRfZW50ZXJwcmlzZV9saW51eC82L2h0bWwvaW5zdGFsbGF0aW9uX2d1aWRlL3MyLWRpc2twYXJ0cmVjb21tZW5kLXBwYyNpZDQzOTQwMDc=&#34;&gt;关于 swap 分区大小设置的建议&lt;/span&gt;：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;物理内存&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;建议的交换空间大小&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;如果开启休眠功能建议的交换空间大小&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;⩽ 2GB&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;内存的 2 倍&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;内存的 3 倍&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&amp;gt; 2GB – 8GB&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;等于内存大小&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;内存的 2 倍&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&amp;gt; 8GB – 64GB&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;至少 4G&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;内存的 1.5 倍&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&amp;gt; 64GB&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;至少 4G&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;不建议使用休眠&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;最后结合日常使用，一般来说可以按照如下规则设置 swap 大小：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;4G 以内的物理内存，SWAP 设置为内存的 2 倍，不超过 4G。&lt;/li&gt;
&lt;li&gt;4-8G 的物理内存，SWAP 等于内存大小。&lt;/li&gt;
&lt;li&gt;8-64G 的物理内存，SWAP 设置为 8G。&lt;/li&gt;
&lt;li&gt;64-256G 物理内存，SWAP 设置为 16G。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;/mnt&lt;/code&gt; ：全称  &lt;code&gt;mount&lt;/code&gt;  可直接理解为 “挂载”，用于存放手动挂载的硬件。这部分是根目录 &lt;code&gt;/&lt;/code&gt;  下的目录，用来挂载文件系统。&lt;/p&gt;
&lt;p&gt;一般的 Linux 根目录展开如下图：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;994198-20160908160724832-375737054.png&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;
&lt;p&gt;然后按照官方的说明，是想把将根磁盘卷挂载到  &lt;code&gt;/mnt&lt;/code&gt;  目录下，即  &lt;code&gt;/mnt&lt;/code&gt;  变成  &lt;code&gt;/&lt;/code&gt;  根目录。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;好了，了解完后下面正式开始。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;执行命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;fdisk /dev/sdx （sdx可以为sda、sdb等，具体以你实际需要挂载的磁盘名称为准）
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;接着你就进入了  &lt;code&gt;fdisk&lt;/code&gt;  操作环境，为了获取该命令下的操作功能，根据提示输入  &lt;code&gt;m&lt;/code&gt;  并回车查看各命令的作用：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20220414144302934.png&#34; alt=&#34;image-20220414144302934&#34; /&gt;&lt;/p&gt;
&lt;p&gt;在  &lt;code&gt;fdisk&lt;/code&gt;  操作环境下：&lt;/p&gt;
&lt;p&gt;1、对于一个全新的磁盘（格式化了），输入  &lt;code&gt;o&lt;/code&gt;  来创建一个全新的  &lt;code&gt;MBR&lt;/code&gt;  分区表（因为这里是 BIOS 引导）；如果是旧磁盘（要么原本有  &lt;code&gt;MBR&lt;/code&gt;  分区表，要么不是  &lt;code&gt;MBR&lt;/code&gt;  属性  &lt;code&gt;DOS&lt;/code&gt;  的），那对于非  &lt;code&gt;MBR&lt;/code&gt;  分区表可能得更改分区表或者格式化，而已有  &lt;code&gt;MBR&lt;/code&gt;  分区表的直接执行第 2 步。&lt;/p&gt;
&lt;p&gt;2、输入  &lt;code&gt;n&lt;/code&gt;  创建一个新的分区，首先会让你选择类型分区，输入  &lt;code&gt;p&lt;/code&gt;  选择主分区，回车接着选择分区号，这里一般直接回车使用默认数值，这样可以避免自己定义出现冲突；紧接着选择开始起扇区地址，如果不知道原有区域划分情况，那一般直接回车使用默认数值即可；随后，输入结束扇区地址或者容量大小，这里决定了你为该分区创建的容量大小；我们按照表格顺序创建分区，那这第一个就是  &lt;code&gt;swap&lt;/code&gt;  交换分区，例如我分配的是 8G 容量，那可以直接输入容量大小： &lt;code&gt;+8G&lt;/code&gt;  。&lt;/p&gt;
&lt;p&gt;3、创建完毕后，可以输入  &lt;code&gt;p&lt;/code&gt;  来查看创建的分区。&lt;/p&gt;
&lt;p&gt;4、重复第 2 项创建根目录分区和第 3 项确认最后的分区信息，至此就有两个分区（对应表格）。&lt;/p&gt;
&lt;p&gt;5、最后输入  &lt;code&gt;w&lt;/code&gt;  将之前所有的操作写入磁盘并生效。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;UEFI/GPT&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;与上一种引导方式相比，根据表格显示，只多了一个 &lt;strong&gt;EFI 系统分区&lt;/strong&gt;，然后了解一下这个挂载点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/mnt/boot&lt;/code&gt; ：上面说了官方是想把将根磁盘卷挂载到  &lt;code&gt;/mnt&lt;/code&gt;  目录下，那这个 boot 引导自然就挂载到了新的  &lt;code&gt;/mnt&lt;/code&gt;  目录下了。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在该引导模式下的操作就如下。&lt;/p&gt;
&lt;p&gt;执行命令如下进入  &lt;code&gt;fdisk&lt;/code&gt;  操作环境：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;fdisk /dev/sdx （sdx可以为sda、sdb等，具体以你实际需要挂载的磁盘名称为准）
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在  &lt;code&gt;fdisk&lt;/code&gt;  操作环境下：&lt;/p&gt;
&lt;p&gt;1、对于一个全新的磁盘（格式化了），这里则输入  &lt;code&gt;g&lt;/code&gt;  来创建一个全新的  &lt;code&gt;GPT&lt;/code&gt;  分区表（因为到这里是 UEFI 引导）；同样的如果是旧磁盘那跟上面的 BIOS 引导操作差不多，只不过这里是  &lt;code&gt;GPT&lt;/code&gt;  属性了。&lt;/p&gt;
&lt;p&gt;2、输入  &lt;code&gt;n&lt;/code&gt;  创建一个新的分区，让你选择分区号 **（UEFI 比 BIOS 少了类型分区选择）**，这里一般直接回车使用默认数值，这样可以避免自己定义出现冲突；紧接着选择开始起扇区地址，如果不知道原有区域划分情况，那一般直接回车使用默认数值即可；随后，输入结束扇区地址或者容量大小，这里决定了你为该分区创建的容量大小；我们按照表格顺序创建分区，那这第一个就是  &lt;code&gt;/mnt/boot&lt;/code&gt;  引导分区，例如我取的是 512MiB 容量，那可以直接输入容量大小： &lt;code&gt;+512M&lt;/code&gt;  。&lt;/p&gt;
&lt;p&gt;3、创建完毕后，可以输入  &lt;code&gt;p&lt;/code&gt;  来查看创建的分区。&lt;/p&gt;
&lt;p&gt;4、重复第 2 项和第 3 项两次，分别创建  &lt;code&gt;[SWAP]&lt;/code&gt;  和  &lt;code&gt;/mnt&lt;/code&gt; ，至此就有三个分区（对应表格）。&lt;/p&gt;
&lt;p&gt;5、最后输入  &lt;code&gt;w&lt;/code&gt;  将之前所有的操作写入磁盘并生效。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;格式化分区&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#格式化分区&#34;&gt;#&lt;/a&gt; 格式化分区&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;EFI 系统分区（仅对于 UEFI/GPT 引导方式）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;使用  &lt;code&gt;mkfs.fat&lt;/code&gt;  命令将其格式化为 Fat32：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkfs.fat -F 32 /dev/sdxY （sdxY为上面创建的 EFI 系统分区符）
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;swap 交换分区&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如果有创建，则请使用  &lt;code&gt;mkswap&lt;/code&gt;  命令将其初始化：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkswap /dev/sdxY （sdxY为上面创建的交换空间分区符）
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt; &lt;code&gt;/mnt&lt;/code&gt;  根目录分区&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;执行以下命令创建一个 Ext4 文件系统：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkfs.ext4 /dev/sdxY （sdxY为上面创建的根分区符）
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;挂载分区&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#挂载分区&#34;&gt;#&lt;/a&gt; 挂载分区&lt;/h2&gt;
&lt;p&gt;1、将根磁盘卷挂载到  &lt;code&gt;/mnt&lt;/code&gt; ，执行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mount /dev/sdxY /mnt （把 sdxY替换为上面创建根分区符）
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2、如果创建了  &lt;code&gt;swap&lt;/code&gt;  交换空间卷，执行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;swapon /dev/sdxY （把 sdxY替换为上面创建的交换空间分区符）
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3、对于 UEFI 系统，挂载 EFI 系统分区：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /mnt/boot
mount /dev/sdxY /mnt/boot （把 sdxY替换为上面创建的 EFI 系统分区符）
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;选择镜像&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#选择镜像&#34;&gt;#&lt;/a&gt; 选择镜像&lt;/h2&gt;
&lt;p&gt;文件  &lt;code&gt;/etc/pacman.d/mirrorlist&lt;/code&gt;  定义了软件包会从哪个镜像源下载。在列表中越前的镜像在下载软件包时有越高的优先权。&lt;/p&gt;
&lt;p&gt;各地区镜像源获取：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9hcmNobGludXgub3JnL21pcnJvcmxpc3Qv&#34;&gt;https://archlinux.org/mirrorlist/&lt;/span&gt; ，然后点击生成：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20220415095310180.png&#34; alt=&#34;image-20220415095310180&#34; /&gt;&lt;/p&gt;
&lt;p&gt;编辑  &lt;code&gt;/etc/pacman.d/mirrorlist&lt;/code&gt;  文件，执行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/pacman.d/mirrorlist
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后进入 VIM 环境，输入  &lt;code&gt;i&lt;/code&gt;  进入编辑状态，然后根据上面生成提供的镜像表，选择几个放到文件最顶端，在这里笔者选择阿里云镜像：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;image-20220415103048537.png&#34; alt=&#34;image-20220415103048537&#34; /&gt;&lt;/p&gt;
&lt;p&gt;如果其速度不佳，可以手动指定其他镜像源，像中科大或者清华的放在最上面即可：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后，按  &lt;code&gt;Esc&lt;/code&gt;  键退出编程，最后输入  &lt;code&gt;:wq&lt;/code&gt;  保存退出。&lt;/p&gt;
&lt;p&gt;关于 vim 命令的使用，可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC12aW0uaHRtbA==&#34;&gt;https://www.runoob.com/linux/linux-vim.html&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;安装必需的软件包&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装必需的软件包&#34;&gt;#&lt;/a&gt; 安装必需的软件包&lt;/h2&gt;
&lt;p&gt;使用  &lt;code&gt;pacstrap&lt;/code&gt;  脚本，安装 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9hcmNobGludXgub3JnL3BhY2thZ2VzLz9uYW1lPWJhc2U=&#34;&gt;base&lt;/span&gt; 软件包和 Linux &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvS2VybmVsXyglRTclQUUlODAlRTQlQkQlOTMlRTQlQjglQUQlRTYlOTYlODcp&#34;&gt;内核&lt;/span&gt;以及常规硬件的固件：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pacstrap /mnt base base-devel linux linux-headers linux-firmware （base-devel在 AUR包的安装是必须的）
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;fstab配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#fstab配置&#34;&gt;#&lt;/a&gt; Fstab 配置&lt;/h2&gt;
&lt;p&gt;生成自动挂载分区的  &lt;code&gt;fstab&lt;/code&gt;  文件，执行命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;genfstab -U /mnt &amp;gt;&amp;gt; /mnt/etc/fstab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后  &lt;code&gt;cat&lt;/code&gt;  一下检查生成的  &lt;code&gt;/mnt/etc/fstab&lt;/code&gt;  文件是否正确：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat /mnt/etc/fstab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;执行后将显示各分区挂载情况及属性信息。&lt;/p&gt;
&lt;h2 id=&#34;chroot配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#chroot配置&#34;&gt;#&lt;/a&gt; Chroot 配置&lt;/h2&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvQ2hhbmdlX3Jvb3RfKCVFNyVBRSU4MCVFNCVCRCU5MyVFNCVCOCVBRCVFNiU5NiU4Nyk=&#34;&gt;Change root&lt;/span&gt; 到新安装的系统：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;arch-chroot /mnt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;执行了这步以后，我们的操作都相当于在磁盘上新装的系统中进行。&lt;/p&gt;
&lt;h2 id=&#34;时区配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#时区配置&#34;&gt;#&lt;/a&gt; 时区配置&lt;/h2&gt;
&lt;p&gt;设置时区：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ln -sf /usr/share/zoneinfo/Region（地区名）/City（城市名） /etc/localtime
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;eg：以上海为例，执行  &lt;code&gt;ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;然后运行  &lt;code&gt;hwclock&lt;/code&gt;  以生成  &lt;code&gt;/etc/adjtime&lt;/code&gt; ：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hwclock --systohc
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;本地化配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#本地化配置&#34;&gt;#&lt;/a&gt; 本地化配置&lt;/h2&gt;
&lt;p&gt;程序和库如果需要本地化文本，则需要根据区域设置 Locale，以明确规定地域、货币、时区日期的格式、字符排列方式和其他本地化标准。&lt;/p&gt;
&lt;p&gt;需在这两个文件设置： &lt;code&gt;locale.gen&lt;/code&gt;  与  &lt;code&gt;locale.conf&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;通过前面的 Chroot 配置，我们已经处于 chroot 环境下了，这就意味这现在所在的系统中只有一些最基本的包（组件），而 VIM 组件并未包含在里面，这时候就需要自己安装组件包了。利用 Archlinux 下非常强大的包管理工具  &lt;code&gt;pacman&lt;/code&gt; ，其安装包的命令格式为  &lt;code&gt;pacman -S 包名&lt;/code&gt; ， &lt;code&gt;pacman&lt;/code&gt;  会自动检查这个包所需要的其他包（即为依赖）并一起装上。&lt;/p&gt;
&lt;p&gt;然后我们安装 VIM 组件，执行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pacman -S vim
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;1、利用刚安装的  &lt;code&gt;vim&lt;/code&gt;  ，编辑  &lt;code&gt;locale.gen&lt;/code&gt;  文件：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/locale.gen
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;找到  &lt;code&gt;zh_CN.UTF-8 UTF-8&lt;/code&gt; 、 &lt;code&gt;en_US.UTF-8 UTF-8&lt;/code&gt;  这两行，去掉注释并保存。&lt;/p&gt;
&lt;p&gt;紧接着执行  &lt;code&gt;locale-gen&lt;/code&gt;  以生成 locale 信息：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;locale-gen
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2、然后创建 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9tYW4uYXJjaGxpbnV4Lm9yZy9tYW4vbG9jYWxlLmNvbmYuNQ==&#34;&gt;locale.conf&lt;/span&gt; 文件，并 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvTG9jYWxlXyglRTclQUUlODAlRTQlQkQlOTMlRTQlQjglQUQlRTYlOTYlODcpIyVFNyVCMyVCQiVFNyVCQiU5RiVFNSU4QyVCQSVFNSU5RiU5RiVFOCVBRSVCRSVFNyVCRCVBRQ==&#34;&gt;编辑设定 LANG 变量&lt;/span&gt;，&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;echo LANG=en_US.UTF-8 &amp;gt; /etc/locale.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;网络配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#网络配置&#34;&gt;#&lt;/a&gt; 网络配置&lt;/h2&gt;
&lt;p&gt;创建  &lt;code&gt;/etc/hostname&lt;/code&gt;  文件，并设定的一个  &lt;code&gt;myhostname&lt;/code&gt; ：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;echo myhostname &amp;gt; /etc/hostname （myhostname是你想要为该系统设置的名称）
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这步在我目前使用的功能里好像没用到。。。&lt;/p&gt;
&lt;p&gt;然后，在官方文档中有一条说明：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;请注意，目前的 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9hcmNobGludXgub3JnL3BhY2thZ2VzLz9uYW1lPWJhc2U=&#34;&gt;base&lt;/span&gt; 不含有任何网络管理工具。对于新安装的系统环境，请接着完成&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvJUU3JUJEJTkxJUU3JUJCJTlDJUU5JTg1JThEJUU3JUJEJUFF&#34;&gt;网络配置&lt;/span&gt;，配置过程中可能包括要安装合适的&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvJUU3JUJEJTkxJUU3JUJCJTlDJUU3JUFFJUExJUU3JTkwJTg2&#34;&gt;网络管理&lt;/span&gt;软件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;因此，我们需要安装网络配置管理包（&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvRGhjcGNkXyglRTclQUUlODAlRTQlQkQlOTMlRTQlQjglQUQlRTYlOTYlODcp&#34;&gt;DHCP&lt;/span&gt; 客户端和 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvTmV0Y3RsXyglRTclQUUlODAlRTQlQkQlOTMlRTQlQjglQUQlRTYlOTYlODcp&#34;&gt;netctl&lt;/span&gt; 网络管理器）：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pacman -S dhcpcd netctl
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;root-密码&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#root-密码&#34;&gt;#&lt;/a&gt; Root 密码&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Root&lt;/code&gt;  是  &lt;code&gt;Linux&lt;/code&gt;  中具有最高权限帐户，有些敏感的操作必须通过  &lt;code&gt;Root&lt;/code&gt;  用户进行，比如使用 &lt;code&gt;pacman&lt;/code&gt;  命令。&lt;/p&gt;
&lt;p&gt;执行以下命令，然后根据提示输入两次密码即可（注意输入是不显示出来）：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;passwd root
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;安装引导程序&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装引导程序&#34;&gt;#&lt;/a&gt; 安装引导程序&lt;/h2&gt;
&lt;p&gt;如果是 Intel 或 AMD 的 CPU，启用 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvTWljcm9jb2RlXyglRTclQUUlODAlRTQlQkQlOTMlRTQlQjglQUQlRTYlOTYlODcp&#34;&gt;微码&lt;/span&gt; 更新：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Intel&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pacman -S intel-ucode
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;AMD&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pacman -S amd-ucode
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;接着，官方推荐的引导加载是 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvR1JVQl8oJUU3JUFFJTgwJUU0JUJEJTkzJUU0JUI4JUFEJUU2JTk2JTg3KQ==&#34;&gt;GRUB&lt;/span&gt; （其他的引导加载可看：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93aWtpLmFyY2hsaW51eC5vcmcvdGl0bGUvQXJjaF9ib290X3Byb2Nlc3NfKCVFNyVBRSU4MCVFNCVCRCU5MyVFNCVCOCVBRCVFNiU5NiU4NykjJUU1JThBJTlGJUU4JTgzJUJEJUU2JUFGJTk0JUU4JUJFJTgz&#34;&gt;引导功能比较&lt;/span&gt;），因此我们对其安装并配置，不同的引导系统，其操作不一样：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;BIOS/MBR&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、安装  &lt;code&gt;grub&lt;/code&gt; ：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pacman -S grub
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2、部署  &lt;code&gt;grub&lt;/code&gt; ：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;grub-install --target=i386-pc /dev/sdx （sdx为要安装 GRUB 的磁盘，注意不是分区）
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;UEFI/GPT&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、安装  &lt;code&gt;grub&lt;/code&gt;  和  &lt;code&gt;efibootmgr&lt;/code&gt; ：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pacman -S grub efibootmgr
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2、部署  &lt;code&gt;grub&lt;/code&gt; ：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;grub-install --target=x86_64-efi --efi-directory=esp --bootloader-id=GRUB （这里的 esp 替换成挂载点）
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;像在这里，那就是：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;最后，不管是哪个引导方式，都执行第三步：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;3、生成配置文件：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;grub-mkconfig -o /boot/grub/grub.cfg
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;执行后，最后显示  &lt;code&gt;done&lt;/code&gt;  即完成操作。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;note：这一步是至关重要的一步，请检查是否正确安装好引导加载程序后再重新启动，否则下次重启后将无法正常进入系统。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;重启&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#重启&#34;&gt;#&lt;/a&gt; 重启&lt;/h2&gt;
&lt;p&gt;最最最后，你需要进行重启来启动已经安装好的系统。&lt;/p&gt;
&lt;p&gt;1、输入以下命令退出 chroot 环境：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;exit
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2、手动取消挂载的分区（这有助于发现任何「繁忙」的分区）：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;如果挂载了  &lt;code&gt;/mnt/boot&lt;/code&gt; ，先  &lt;code&gt;umount -r /mnt/boot&lt;/code&gt; ，再  &lt;code&gt;umount -r /mnt&lt;/code&gt; ，否则直接  &lt;code&gt;umount /mnt&lt;/code&gt; 。&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;umount -r /mnt/boot
umount -r /mnt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3、执行重启：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;reboot
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;other&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#other&#34;&gt;#&lt;/a&gt; Other&lt;/h2&gt;
&lt;p&gt;另外一些比较详细的安装教程：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9hcmNobGludXhzdHVkaW8uZ2l0aHViLmlvL0FyY2hMaW51eFR1dG9yaWFsLyMvP2lkPWFyY2gtbGludXgtJUU1JUFFJTg5JUU4JUEzJTg1JUU0JUJEJUJGJUU3JTk0JUE4JUU2JTk1JTk5JUU3JUE4JThCLWFyY2h0dXRvcmlhbC1hcmNoLWxpbnV4LXN0dWRpbw==&#34;&gt;Arch Linux 安装使用教程&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudmlzZWF0b3IuY29tLzIwMTcvMDUvMTcvYXJjaF9pbnN0YWxsLw==&#34;&gt;以官方 Wiki 的方式安装 ArchLinux&lt;/span&gt;&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
