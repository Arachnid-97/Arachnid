{
    "version": "https://jsonfeed.org/version/1",
    "title": "命运转轮 • All posts by \"dmx512\" tag",
    "description": "不曾亏欠, 不曾辜负, 如此足矣",
    "home_page_url": "https://arachnid.cc",
    "items": [
        {
            "id": "https://arachnid.cc/dmx512-protocol/",
            "url": "https://arachnid.cc/dmx512-protocol/",
            "title": "DMX512 协议",
            "date_published": "2019-08-06T12:08:31.000Z",
            "content_html": "<blockquote>\n<p>DMX512（digital multiplex）</p>\n<p>其实就是主机向从机整包单向广播发送的协议（protocol），从机自取所需。</p>\n<p>DMX512 数据协议是美国舞台灯光协会（USITT）于 1990 年发布的一种灯光控制器与灯具设备进行数据传输的标准。它包括电气特性，数据协议，数据格式等方面的内容。<br />\n512 协议规定使用的波特率是 250Kbps</p>\n</blockquote>\n<h1 id=\"链接拓扑network-topology\"><a class=\"anchor\" href=\"#链接拓扑network-topology\">#</a> 链接拓扑（network topology）</h1>\n<p>根据后面的协议可以知道，其实就是将所有的 slave 挂到线上去。（线最长可以多长？）</p>\n<p><img data-src=\"20190805215926835.png\" alt=\"img\" /></p>\n<h1 id=\"协议protocol时序\"><a class=\"anchor\" href=\"#协议protocol时序\">#</a> 协议（protocol）时序</h1>\n<p>1） 先说明地址，包的格式是固定的，第一个数据帧就是地址 1（说是 0 也可以），接下来的数据帧，地址逐渐 + 1。</p>\n<p>2） 1 slot 或者叫 1 data frame（数据帧）= 1 start bit（低电平） + 8 data bits + 2 stop bits（高电平） = 11bits， 1bit = 4us，1slot = 44us。（下图右下角的蓝色字体部分）</p>\n<p>3） 1 packet （数据包）= 1 Break + 1 MAB（mark after break） + 1 SC（start code） + 512 slots + 1 MTBP（mark time between packets） （下图红色字体部分）</p>\n<ul>\n<li>1 break 典型值 88us</li>\n<li>MAB 典型值 8us</li>\n<li>SC 就是一帧 44us，第 0 帧</li>\n<li>MTBP，高电平有效，0 - 1s 之间</li>\n</ul>\n<p>time = 88us + 8us + 44us + 512 * 44us + 0 = 22668us = 22.668ms 发包频率 44.11Hz，也就是控制频率了，如果地址用不完，把 slot 减少，时间也可以节省，然后频率可以更高了。(调光控制台每发送一个信息包，可以对全部 512 个受控通道形成一次全面的控制。发送一个信息包的时间大约是 23 ms，每秒钟将对所有 512 个受控通道完成 44 次控制，即受控光路的刷新频率 44 Hz，如果实际受控通道少于 512 个，那么刷新频率将相应提高。)</p>\n<p><img data-src=\"20190805220038760.png\" alt=\"img\" /></p>\n<p>每个 slot 对应右下角放大的每帧时序：</p>\n<p><img data-src=\"20190805220057706.png\" alt=\"img\" /></p>\n<ol>\n<li>\n<p>START BIT 为开始位，宽度为一个比特，是受控灯具准备接收并解码控制数据的开始标志。</p>\n</li>\n<li>\n<p>STOP BITS 为结束位，宽度为两个比特，表示一个指令帧的结束。</p>\n</li>\n<li>\n<p>D0～ D7 为 8 位控制数据，其电平组合从 00000000 ~ 11111111 共有 256 个状态（对应十进制数的 0～255），控制灯光的亮度时，可产生 256 个亮度等级，00000000 (0) 对应灯光最暗，11111111 (255) 对应灯光最亮。</p>\n</li>\n<li>\n<p>无校验位。</p>\n</li>\n<li>\n<p>DMX512 指令的位宽（每比特宽度）是 4 us，每一个指令帧 11 位，故指令帧宽度为 44 us，传输速率为 1 / 44us = 250 kbps。</p>\n</li>\n</ol>\n<p><strong>note：</strong> 一个完整的 DMX512 信息包（Packet）由一个 Break 位、一个 MAB 位、一个 SC 、512 个数据帧和一个 MTBP 位构成。</p>\n<ol>\n<li>Break 为中断位，对应一个信息包结束后的程序复位阶段，宽度不少于两个帧（22 bit，1bit = 4us）。</li>\n<li>程序复位结束后应发送控制数据，但由于每一个数据帧的第一位（即开始位）为低电平，所以必须用一个高电平脉冲间隔前后两个低电平脉冲，这个起间隔、分离作用的高电平脉冲即 MAB（Mark After Break），此脉冲一到，意味着 “新一轮” 的控制又开始了。</li>\n<li>SC（Start Code）意为开始代码帧（slot0），和此后到来的数据帧一样，也是由 11 位构成，除两个高电平的结束位之外，其他 9 位全部是低电平，通常将其叫做第 0 帧或第 0 通道，可理解为一个不存在的通道。</li>\n<li>MTBP（Mark TimeBetween Packets）标志着一个完整的信息包发送完毕，是下一个信息包即将开始的 “空闲位”，高电平有效。</li>\n</ol>\n<h1 id=\"时序规格标准\"><a class=\"anchor\" href=\"#时序规格标准\">#</a> 时序规格标准</h1>\n<p>在 DMX512-A 草案中，执行的标准如下：</p>\n<p><img data-src=\"image-20230112233937497.png\" alt=\"image-20230112233937497\" /></p>\n<ul>\n<li>Timing Diagram Values for Transmitter</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Designation</th>\n<th style=\"text-align:center\">Description</th>\n<th style=\"text-align:center\">Min</th>\n<th style=\"text-align:center\">Typical</th>\n<th style=\"text-align:center\">Max</th>\n<th style=\"text-align:center\">Unit</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">Bit Rate</td>\n<td style=\"text-align:center\">245</td>\n<td style=\"text-align:center\">250</td>\n<td style=\"text-align:center\">255</td>\n<td style=\"text-align:center\">kbit / sec</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">Bit Time</td>\n<td style=\"text-align:center\">3.92</td>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">4.08</td>\n<td style=\"text-align:center\">µs</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">Min. Update time for 513 slots</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">22.7</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">ms</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">Max. Refresh rate for 513 slots</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">44</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">updates / sec</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">SPACE for BREAK</td>\n<td style=\"text-align:center\">92</td>\n<td style=\"text-align:center\">176</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">µs</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">MARK after BREAK (MAB)</td>\n<td style=\"text-align:center\">12</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">&lt; 10^6</td>\n<td style=\"text-align:center\">µs</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">9</td>\n<td style=\"text-align:center\">MARK Time between slots</td>\n<td style=\"text-align:center\">0</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">&lt; 1.00</td>\n<td style=\"text-align:center\">s</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">10</td>\n<td style=\"text-align:center\">MARK before BREAK (MBB)</td>\n<td style=\"text-align:center\">0</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">&lt; 1.00</td>\n<td style=\"text-align:center\">s</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">11</td>\n<td style=\"text-align:center\">BREAK to BREAK time</td>\n<td style=\"text-align:center\">1204</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">10^6</td>\n<td style=\"text-align:center\">µs</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">13</td>\n<td style=\"text-align:center\">DMX512 Packet</td>\n<td style=\"text-align:center\">1204</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">10^6</td>\n<td style=\"text-align:center\">µs</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>Timing Diagram Values for Receivers</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Designation</th>\n<th style=\"text-align:center\">Description</th>\n<th style=\"text-align:center\">Min</th>\n<th style=\"text-align:center\">Typical</th>\n<th style=\"text-align:center\">Max</th>\n<th style=\"text-align:center\">Unit</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">Bit Rate</td>\n<td style=\"text-align:center\">245</td>\n<td style=\"text-align:center\">250</td>\n<td style=\"text-align:center\">255</td>\n<td style=\"text-align:center\">kbit / sec</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">Bit Time</td>\n<td style=\"text-align:center\">3.92</td>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">4.08</td>\n<td style=\"text-align:center\">µs</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">Min. Update time for 513 slots</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">22.7</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">ms</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">Max. Refresh rate for 513 slots</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">44</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">updates / sec</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">SPACE for BREAK</td>\n<td style=\"text-align:center\">88</td>\n<td style=\"text-align:center\">176</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">µs</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">MARK after BREAK (MAB)</td>\n<td style=\"text-align:center\">8</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">&lt; 10^6</td>\n<td style=\"text-align:center\">µs</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">9</td>\n<td style=\"text-align:center\">MARK Time between slots</td>\n<td style=\"text-align:center\">0</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">&lt; 1.00</td>\n<td style=\"text-align:center\">s</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">10</td>\n<td style=\"text-align:center\">MARK before BREAK (MBB)</td>\n<td style=\"text-align:center\">0</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">&lt; 1.00</td>\n<td style=\"text-align:center\">s</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">11</td>\n<td style=\"text-align:center\">BREAK to BREAK time</td>\n<td style=\"text-align:center\">1196</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">1.25 * 10^6</td>\n<td style=\"text-align:center\">µs</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">13</td>\n<td style=\"text-align:center\">DMX512 Packet</td>\n<td style=\"text-align:center\">1204</td>\n<td style=\"text-align:center\">-</td>\n<td style=\"text-align:center\">1.26 * 10^6</td>\n<td style=\"text-align:center\">µs</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"通道控制\"><a class=\"anchor\" href=\"#通道控制\">#</a> 通道控制</h1>\n<p>目前由于灯光种类的多样性，不再是只用单通道控制一款灯亮度这么简单了；像摇头灯、彩色灯等灯光设备，需占几个或几十个控制通道；每个通道对应不同的功能，该功能根据灯厂资料提供，如下所例：</p>\n<p><img data-src=\"_______1.png\" alt=\"img\" /></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYWJvbGlnaHQuY29tL3Byb2Qvc29ydDIvczYucGhw\">https://www.abolight.com/prod/sort2/s6.php</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5hYm9saWdodC5jb20vcHJvZC9zb3J0OC9sa2lwLWxlZDE1MGMucGhw\">http://www.abolight.com/prod/sort8/lkip-led150c.php</span></p>\n<h1 id=\"非标程序设计\"><a class=\"anchor\" href=\"#非标程序设计\">#</a> 非标程序设计</h1>\n<p>基于 DMX512 控制协议进行调光控制的灯光系统叫做数字灯光系统。目前，包括摇头灯在内的各种舞台灯、调光控制器、控制台、换色器等各种灯光控制设备，都对 DMX512 协议进行支持，已全面实现调光控制的数字化，并在此基础上，逐渐趋于网络化（ArtNet 协议）。那么，根据上面的协议通讯，我们是否可以模拟信号对 DMX512 协议进行非标设计呢？答案是可以的。</p>\n<h1 id=\"参考\"><a class=\"anchor\" href=\"#参考\">#</a> 参考</h1>\n<p>《ANSI-ESTA_E1-11_2008R2018.pdf》</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZXJ3aW5yb2wuY29tL3BhZ2UvYXJ0aWNsZXMvZG14NTEyLw==\">https://www.erwinrol.com/page/articles/dmx512/</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93dzEubWljcm9jaGlwLmNvbS9kb3dubG9hZHMvZW4vQXBwbm90ZXMvMDEwNzZBLnBkZg==\">https://ww1.microchip.com/downloads/en/Appnotes/01076A.pdf</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3BpY3Byb2plY3RzLm9yZy51ay9wcm9qZWN0cy9kbXgvZG14Njg4Lw==\">http://picprojects.org.uk/projects/dmx/dmx688/</span></p>\n",
            "tags": [
                "history",
                "DMX512"
            ]
        }
    ]
}